
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the CoinFLEX US API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-70013677.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-83b11cfd.js"></script>
    <link href="images/favicon-92b8c2e4.ico" rel="icon" type="image/ico" />

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;javascript&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7649e541.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">curl</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#change-log" class="toc-h1 toc-link" data-title="Change Log">Change Log</a>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#api-key-management" class="toc-h1 toc-link" data-title="API Key Management">API Key Management</a>
          </li>
          <li>
            <a href="#historical-data" class="toc-h1 toc-link" data-title="Historical Data">Historical Data</a>
          </li>
          <li>
            <a href="#rate-limit" class="toc-h1 toc-link" data-title="Rate Limit">Rate Limit</a>
          </li>
          <li>
            <a href="#websocket-api" class="toc-h1 toc-link" data-title="Websocket API">Websocket API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#websocket-api-authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#websocket-api-session-keep-alive" class="toc-h2 toc-link" data-title="Session Keep Alive">Session Keep Alive</a>
                  </li>
                  <li>
                    <a href="#websocket-api-order-commands" class="toc-h2 toc-link" data-title="Order Commands">Order Commands</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#websocket-api-order-commands-place-limit-order" class="toc-h3 toc-link" data-title="Place Limit Order">Place Limit Order</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-place-market-order" class="toc-h3 toc-link" data-title="Place Market Order">Place Market Order</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-place-stop-limit-order" class="toc-h3 toc-link" data-title="Place Stop Limit Order">Place Stop Limit Order</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-place-batch-orders" class="toc-h3 toc-link" data-title="Place Batch Orders">Place Batch Orders</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-cancel-order" class="toc-h3 toc-link" data-title="Cancel Order">Cancel Order</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-cancel-batch-orders" class="toc-h3 toc-link" data-title="Cancel Batch Orders">Cancel Batch Orders</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-modify-order" class="toc-h3 toc-link" data-title="Modify Order">Modify Order</a>
                          </li>
                          <li>
                            <a href="#websocket-api-order-commands-modify-batch-orders" class="toc-h3 toc-link" data-title="Modify Batch Orders">Modify Batch Orders</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#websocket-api-subscriptions-private" class="toc-h2 toc-link" data-title="Subscriptions - Private">Subscriptions - Private</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#websocket-api-subscriptions-private-balance-channel" class="toc-h3 toc-link" data-title="Balance Channel">Balance Channel</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-private-position-channel" class="toc-h3 toc-link" data-title="Position Channel">Position Channel</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-private-order-channel" class="toc-h3 toc-link" data-title="Order Channel">Order Channel</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-orderopened" class="toc-h4 toc-link" data-title="OrderOpened">OrderOpened</a>
                                  </li>
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-orderclosed" class="toc-h4 toc-link" data-title="OrderClosed">OrderClosed</a>
                                  </li>
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-orderclosed-failure" class="toc-h4 toc-link" data-title="OrderClosed Failure">OrderClosed Failure</a>
                                  </li>
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-ordermodified" class="toc-h4 toc-link" data-title="OrderModified">OrderModified</a>
                                  </li>
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-ordermodified-failure" class="toc-h4 toc-link" data-title="OrderModified Failure">OrderModified Failure</a>
                                  </li>
                                  <li>
                                    <a href="#websocket-api-subscriptions-private-order-channel-ordermatched" class="toc-h4 toc-link" data-title="OrderMatched">OrderMatched</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#websocket-api-subscriptions-public" class="toc-h2 toc-link" data-title="Subscriptions - Public">Subscriptions - Public</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#websocket-api-subscriptions-public-orderbook-depth" class="toc-h3 toc-link" data-title="Orderbook Depth">Orderbook Depth</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-public-trade" class="toc-h3 toc-link" data-title="Trade">Trade</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-public-ticker" class="toc-h3 toc-link" data-title="Ticker">Ticker</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-public-candles" class="toc-h3 toc-link" data-title="Candles">Candles</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-public-liquidation-rfq" class="toc-h3 toc-link" data-title="Liquidation RFQ">Liquidation RFQ</a>
                          </li>
                          <li>
                            <a href="#websocket-api-subscriptions-public-market" class="toc-h3 toc-link" data-title="Market">Market</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#websocket-api-other-responses" class="toc-h2 toc-link" data-title="Other Responses">Other Responses</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#websocket-api-other-responses-cancel-all-open-orders" class="toc-h3 toc-link" data-title="Cancel All Open Orders">Cancel All Open Orders</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#websocket-api-error-codes" class="toc-h2 toc-link" data-title="Error Codes">Error Codes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rest-api" class="toc-h1 toc-link" data-title="REST API">REST API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rest-api-error-codes" class="toc-h2 toc-link" data-title="Error Codes">Error Codes</a>
                  </li>
                  <li>
                    <a href="#rest-api-rate-limits" class="toc-h2 toc-link" data-title="Rate Limits">Rate Limits</a>
                  </li>
                  <li>
                    <a href="#rest-api-authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#rest-api-account-amp-wallet-private" class="toc-h2 toc-link" data-title="Account &amp; Wallet - Private">Account &amp; Wallet - Private</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#rest-api-account-amp-wallet-private-get-v1-accounts" class="toc-h3 toc-link" data-title="GET <code>/v1/accounts</code>">GET <code>/v1/accounts</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-account-amp-wallet-private-get-v1-wallets" class="toc-h3 toc-link" data-title="GET <code>/v1/wallets</code>">GET <code>/v1/wallets</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-account-amp-wallet-private-get-v1-balances" class="toc-h3 toc-link" data-title="GET <code>/v1/balances</code>">GET <code>/v1/balances</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-account-amp-wallet-private-get-v1-trades" class="toc-h3 toc-link" data-title="GET <code>/v1/trades</code>">GET <code>/v1/trades</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#rest-api-deposits-amp-withdrawals-private" class="toc-h2 toc-link" data-title="Deposits &amp; Withdrawals - Private">Deposits &amp; Withdrawals - Private</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-get-v1-deposit-addresses" class="toc-h3 toc-link" data-title="GET <code>/v1/deposit-addresses</code>">GET <code>/v1/deposit-addresses</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-get-v1-deposit" class="toc-h3 toc-link" data-title="GET <code>/v1/deposit</code>">GET <code>/v1/deposit</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal-addresses" class="toc-h3 toc-link" data-title="GET <code>/v1/withdrawal-addresses</code>">GET <code>/v1/withdrawal-addresses</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal" class="toc-h3 toc-link" data-title="GET <code>/v1/withdrawal</code>">GET <code>/v1/withdrawal</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-post-v1-withdrawal" class="toc-h3 toc-link" data-title="POST <code>/v1/withdrawal</code>">POST <code>/v1/withdrawal</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal-fee" class="toc-h3 toc-link" data-title="GET <code>/v1/withdrawal-fee</code>">GET <code>/v1/withdrawal-fee</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#rest-api-flex-assets-private" class="toc-h2 toc-link" data-title="Flex Assets - Private">Flex Assets - Private</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#rest-api-flex-assets-private-post-v1-flexasset-mint" class="toc-h3 toc-link" data-title="POST <code>/v1/flexasset/mint</code>">POST <code>/v1/flexasset/mint</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-flex-assets-private-post-v1-flexasset-redeem" class="toc-h3 toc-link" data-title="POST <code>/v1/flexasset/redeem</code>">POST <code>/v1/flexasset/redeem</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-flex-assets-private-get-v1-flexasset-mint" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/mint</code>">GET <code>/v1/flexasset/mint</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-flex-assets-private-get-v1-flexasset-redeem" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/redeem</code>">GET <code>/v1/flexasset/redeem</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-flex-assets-private-get-v1-flexasset-earned" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/earned</code>">GET <code>/v1/flexasset/earned</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#rest-api-orders-private" class="toc-h2 toc-link" data-title="Orders - Private">Orders - Private</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#rest-api-orders-private-post-v1-orders-place" class="toc-h3 toc-link" data-title="POST <code>/v1/orders/place</code>">POST <code>/v1/orders/place</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-orders-private-get-v1-orders" class="toc-h3 toc-link" data-title="GET <code>/v1/orders</code>">GET <code>/v1/orders</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-orders-private-get-v1-orders-working" class="toc-h3 toc-link" data-title="GET <code>/v1/orders/working</code>">GET <code>/v1/orders/working</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-orders-private-delete-v1-orders-cancel" class="toc-h3 toc-link" data-title="DELETE <code>/v1/orders/cancel</code>">DELETE <code>/v1/orders/cancel</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-orders-private-delete-v1-orders-cancel-all" class="toc-h3 toc-link" data-title="DELETE <code>/v1/orders/cancel-all</code>">DELETE <code>/v1/orders/cancel-all</code></a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#rest-api-market-data-public" class="toc-h2 toc-link" data-title="Market Data - Public">Market Data - Public</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-markets" class="toc-h3 toc-link" data-title="GET <code>/v1/markets</code>">GET <code>/v1/markets</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-assets" class="toc-h3 toc-link" data-title="GET <code>/v1/assets</code>">GET <code>/v1/assets</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-tickers" class="toc-h3 toc-link" data-title="GET <code>/v1/tickers</code>">GET <code>/v1/tickers</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-candles" class="toc-h3 toc-link" data-title="GET <code>/v1/candles</code>">GET <code>/v1/candles</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-depth" class="toc-h3 toc-link" data-title="GET <code>/v1/depth</code>">GET <code>/v1/depth</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-flexasset-balances" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/balances</code>">GET <code>/v1/flexasset/balances</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-flexasset-positions" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/positions</code>">GET <code>/v1/flexasset/positions</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-flexasset-yields" class="toc-h3 toc-link" data-title="GET <code>/v1/flexasset/yields</code>">GET <code>/v1/flexasset/yields</code></a>
                          </li>
                          <li>
                            <a href="#rest-api-market-data-public-get-v1-exchange-trades" class="toc-h3 toc-link" data-title="GET <code>/v1/exchange-trades</code>">GET <code>/v1/exchange-trades</code></a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://coinflex.us/user-console/register'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='change-log'>Change Log</h1><h1 id='introduction'>Introduction</h1>
<p>Welcome to CoinFLEX US&#39;s application programming interface (API). CoinFLEX US&#39;s APIs provide clients programmatic access to control aspects of their accounts and to place orders on CoinFLEX US&#39;s trading platform. CoinFLEX US supports the following types of APIs:</p>

<ul>
<li>a WebSocket API</li>
<li>a REST API</li>
</ul>

<p>Using these interfaces it is possible to place both authenticated and unauthenticated API commands for public and prvate commands respectively.</p>

<p>To get started please register for a TEST account at <code>https://stg.coinflex.us/user-console/register</code></p>
<h1 id='api-key-management'>API Key Management</h1>
<p>An API key is required to make an authenticated API command.  API keys (public and corresponding secret key) can be generated via the CoinFLEX US GUI within a clients account. </p>

<p>By default, API Keys are read-only and can only read basic account information, such as positions, orders, and trades. They cannot be used to trade such as placing, modifying or cancelling orders.</p>

<p>If you wish to execute orders with your API Key, clients must select the <code>Can Trade</code> permission upon API key creation.</p>

<p>API keys are also only bound to a single sub-account, defined upon creation. This means that an API key will only ever interact and return account information for a single sub-account.</p>
<h1 id='historical-data'>Historical Data</h1>
<p>CoinFLEX US&#39;s historical L2 order book data (depth data), can be found at <a href="https://docs.tardis.dev/historical-data-details/coinflexus">https://docs.tardis.dev/historical-data-details/coinflexus</a> (third party API), which includes historical market data details - instruments, data coverage and data collection specifics for all of our instruments since 2020-07-14.</p>
<h1 id='rate-limit'>Rate Limit</h1>
<p>CoinFLEX US&#39;s APIs allows our clients to access and control their accounts or view our market data using custom-written software. To protect the performance of the system, we impose certain limits:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Limit</th>
</tr>
</thead><tbody>
<tr>
<td>Rest API</td>
<td>100 per second</td>
</tr>
<tr>
<td>Rest API</td>
<td>2500 per 5 mins</td>
</tr>
<tr>
<td>Initialising Websocket Connection</td>
<td>200 per minute</td>
</tr>
<tr>
<td>Websocket API (Auth)</td>
<td>50 per second</td>
</tr>
<tr>
<td>Websocket API (No Auth)</td>
<td>1 per second</td>
</tr>
</tbody></table>
<h1 id='websocket-api'>Websocket API</h1>
<blockquote>
<p><strong>Subscription request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;value1&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;value2&gt;"</span><span class="p">,</span><span class="err">.....</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Subscription success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;opValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;argsValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491945368"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Subscription failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;opValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592498745368"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Command request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"&lt;key1&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value1&gt;"</span><span class="p">,</span><span class="err">.....</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Command success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;opValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592498745368"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"&lt;key1&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value1&gt;"</span><span class="p">,</span><span class="err">.....</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Command failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;opValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;codeCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592498745368"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"&lt;key1&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value1&gt;"</span><span class="p">,</span><span class="err">.....</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>TEST</strong> site</p>

<ul>
<li><code>wss://stgapi.coinflex.us/v1/websocket</code></li>
</ul>

<p><strong>LIVE</strong> site</p>

<ul>
<li><code>wss://stgapi.coinflex.us/v1/websocket</code></li>
</ul>

<p>CoinFLEX US&#39;s application programming interface (API) provides our clients programmatic access to control aspects of their accounts and to place orders on the CoinFLEX US trading platform. The API is accessible via WebSocket connection to the URIs listed above. Commands, replies, and notifications all traverse the WebSocket in text frames with JSON-formatted payloads.</p>

<p>Websocket commands can be sent in either of the following two formats:</p>

<p><strong>For subscription based requests</strong></p>

<p><code>{&quot;op&quot;: &quot;&lt;value&gt;&quot;, &quot;args&quot;: [&quot;&lt;value1&gt;&quot;, &quot;&lt;value2&gt;&quot;,.....]}</code></p>

<p><code>op</code>: can either be:</p>

<ul>
<li>subscribe</li>
<li>unsubscribe</li>
</ul>

<p><code>args</code>: the value(s) will be the instrument ID(s) or asset ID(s), for example:</p>

<ul>
<li>order:BTC-USD-SWAP-LIN</li>
<li>depth:ETH-USD-REPO-LIN</li>
<li>position:all</li>
</ul>

<p><strong>All other commands</strong></p>

<p><code>{&quot;op&quot;: &quot;&lt;command&gt;&quot;, &quot;data&quot;: {&quot;&lt;key1&gt;&quot;:&quot;&lt;value1&gt;&quot;,.....}}</code></p>

<p><code>op</code>: can be:</p>

<ul>
<li>login</li>
<li>placeorder</li>
<li>cancelorder</li>
<li>modifyorder</li>
</ul>

<p><code>data</code>: JSON string of the request object containing the required parameters</p>

<p>Further information regarding the error codes and corresponding error messages from a failed subscription or order command request can be found in a later section of this documentation <a href="#websocket-api-error-codes">Error Codes</a>.</p>

<p><strong>WebSocket adapter</strong></p>

<p><a href="https://pypi.org/project/coinflex-us-ws/">coinflex-us-ws</a> is a websocket wrapper to easily connect to CoinFLEX US&#39;s websockets.</p>
<h2 id='websocket-api-authentication'>Authentication</h2>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">'API-KEY'</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">'API-SECRET'</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">msg_auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg_auth</span><span class="p">))</span>
        <span class="k">while</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">CryptoJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto-js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">apiKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">secretKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">ts</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">enc</span><span class="p">.</span><span class="nx">Base64</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacSHA256</span><span class="p">(</span><span class="nx">ts</span> <span class="o">+</span><span class="dl">'</span><span class="s1">GET/auth/self/verify</span><span class="dl">'</span><span class="p">,</span> <span class="nx">secretKey</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>  
                            <span class="dl">"</span><span class="s2">op</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">tag</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                              <span class="dl">"</span><span class="s2">apiKey</span><span class="dl">"</span><span class="p">:</span> <span class="nx">apiKey</span><span class="p">,</span>
                              <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">ts</span><span class="p">,</span>
                              <span class="dl">"</span><span class="s2">signature</span><span class="dl">"</span><span class="p">:</span> <span class="nx">sign</span>
                            <span class="p">}</span>
                          <span class="p">});</span>

<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://stgapi.coinflex.us/v1/websocket</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">websocket message from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491803978"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span>
  <span class="s">"event"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"success"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="s">"1592491808328"</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">:</span> <span class="nx">True</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">tag</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1592491808329</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"login"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592492069732"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span>
  <span class="s">"event"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"success"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">"code"</span><span class="p">:</span> <span class="s">"&lt;errorCode&gt;"</span><span class="p">,</span>
  <span class="s">"message"</span><span class="p">:</span> <span class="s">"&lt;errorMessage&gt;"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
  <span class="s">"timestamp"</span><span class="p">:</span> <span class="s">"1592492031972"</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">:</span> <span class="nx">False</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">&lt;errorCode&gt;</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">&lt;errorMessage&gt;</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">tag</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1592492031982</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div>
<p>The Websocket API consists of public and private methods. The public methods do not require authentication.  The private methods requires an authenticated websocket connection.</p>

<p>To autenticate a websocket connection a &quot;login&quot; message must be sent containing the clients signature.</p>

<p>The signature is constructed using a HMAC SHA256 operation to get a hash value, which in turn requires the clients API Secret as the key and a constructed message string as the value for the HMAC operation. This hash value is then encoded as a BASE-64 value which becomes the signature used for authentication.</p>

<p>API keys (public and corresponding secret key) can be generated via the GUI within the clients account.</p>

<p>The message string used in the HMAC SHA256 operation is constructed in the following way:</p>

<ul>
<li><code>current millisecond timestamp + &#39;GET/auth/self/verify&#39;</code></li>
</ul>

<p>The signature can therefore be summarised by the following:</p>

<ul>
<li><code>Base64(HmacSHA256(current_ms_timestamp + &#39;GET/auth/self/verify&#39;, API-Secret))</code></li>
</ul>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><strong>&#39;login&#39;</strong></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>&gt;apiKey</td>
<td>STRING</td>
<td>Yes</td>
<td>Clients public API key, visible in the GUI when created</td>
</tr>
<tr>
<td>&gt;timestamp</td>
<td>STRING</td>
<td>Yes</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>&gt;signature</td>
<td>STRING</td>
<td>Yes</td>
<td><code>Base64(HmacSHA256(current_ms_timestamp + &#39;GET/auth/self/verify&#39;, API-Secret))</code></td>
</tr>
</tbody></table>
<h2 id='websocket-api-session-keep-alive'>Session Keep Alive</h2>
<p>To maintain an active WebSocket connection it is imperative to either be subscribed to a channel that pushes data at least once per minute (Depth or Balance) or send a ping to the server once per minute.</p>
<h2 id='websocket-api-order-commands'>Order Commands</h2><h3 id='websocket-api-order-commands-place-limit-order'>Place Limit Order</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9431.48</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">place_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"placeorder"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
            <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="s">"clientOrderId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD-SWAP-LIN"</span><span class="p">,</span>
            <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
            <span class="s">"orderType"</span><span class="p">:</span> <span class="s">"LIMIT"</span><span class="p">,</span>
            <span class="s">"quantity"</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
            <span class="s">"timeInForce"</span><span class="p">:</span> <span class="s">"GTC"</span><span class="p">,</span>
            <span class="s">"price"</span><span class="p">:</span> <span class="mf">9431.48</span>
          <span class="p">}</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">place_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'placeorder'</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">place_order</span><span class="p">))</span>
                <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">break</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491945248"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9431.48"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491945248"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9431.48"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderOpened, OrderMatched etc......).</p>

<aside class="notice">
One account can only place up to 50 orders per second via websocket.
</aside>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>placeorder</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>clientOrderId</td>
<td>INTEGER</td>
<td>No</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Yes</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>Yes</td>
<td><code>LIMIT</code></td>
</tr>
<tr>
<td>price</td>
<td>FLOAT</td>
<td>No</td>
<td>Price</td>
</tr>
<tr>
<td>quantity</td>
<td>FLOAT</td>
<td>Yes</td>
<td>Quantity (denominated by contractValCurrency)</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Yes</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>ENUM</td>
<td>No</td>
<td><ul><li><code>GTC</code> (Good-till-Cancel) - Default</li><li> <code>IOC</code> (Immediate or Cancel, i.e. Taker-only)</li><li> <code>FOK</code> (Fill or Kill, for full size)</li><li><code>MAKER_ONLY</code> (i.e. Post-only)</li><li> <code>MAKER_ONLY_REPRICE</code> (Reprices order to the best maker only price if the specified price were to lead to a taker trade)</li></ul></td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-place-market-order'>Place Market Order</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span> 
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">place_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"placeorder"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
            <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="s">"clientOrderId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"ETH-USD-SWAP-LIN"</span><span class="p">,</span>
            <span class="s">"side"</span><span class="p">:</span> <span class="s">"SELL"</span><span class="p">,</span>
            <span class="s">"orderType"</span><span class="p">:</span> <span class="s">"MARKET"</span><span class="p">,</span>
            <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">5</span>
          <span class="p">}</span>
<span class="p">}</span>


<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">place_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'placeorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491945248"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503359"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderOpened, OrderMatched etc......).</p>

<aside class="notice">
One account can only place up to 50 orders per second via websocket.
</aside>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>placeorder</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>clientOrderId</td>
<td>INTEGER</td>
<td>No</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Yes</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>Yes</td>
<td><code>MARKET</code></td>
</tr>
<tr>
<td>quantity</td>
<td>FLOAT</td>
<td>Yes</td>
<td>Quantity (denominated by contractValCurrency)</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Yes</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-place-stop-limit-order'>Place Stop Limit Order</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY_REPRICE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
         </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">place_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"placeorder"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
            <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="s">"clientOrderId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"ETH-USD-SWAP-LIN"</span><span class="p">,</span>
            <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
            <span class="s">"orderType"</span><span class="p">:</span> <span class="s">"STOP"</span><span class="p">,</span>
            <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s">"timeInForce"</span><span class="p">:</span> <span class="s">"MAKER_ONLY_REPRICE"</span><span class="p">,</span>
            <span class="s">"stopPrice"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s">"limitPrice"</span><span class="p">:</span> <span class="mi">120</span>
         <span class="p">}</span>
<span class="p">}</span>


<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">place_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'placeorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607639739098"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY_REPRICE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"120"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503359"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY_REPRICE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"120"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderOpened, OrderMatched etc......).</p>

<aside class="notice">
One account can only place up to 50 orders per second via websocket.
</aside>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>placeorder</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>clientOrderId</td>
<td>INTEGER</td>
<td>No</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Yes</td>
<td>Market code e.g. <code>ETH-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>Yes</td>
<td><code>STOP</code> for stop-limit orders (stop-market orders not supported)</td>
</tr>
<tr>
<td>quantity</td>
<td>FLOAT</td>
<td>Yes</td>
<td>Quantity (denominated by contractValCurrency)</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Yes</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>limitPrice</td>
<td>FLOAT</td>
<td>Yes</td>
<td>Limit price for the stop-limit order. <p><p>For <strong>BUY</strong> the limit price must be greater or equal to the stop price.<p><p>For <strong>SELL</strong> the limit price must be less or equal to the stop price.</td>
</tr>
<tr>
<td>stopPrice</td>
<td>FLOAT</td>
<td>Yes</td>
<td>Stop price for the stop-limit order.<p><p>Triggered by the best bid price for the <strong>SELL</strong> stop-limit order.<p><p>Triggered by the best ask price for the <strong>BUY</strong> stop-limit order.</td>
</tr>
<tr>
<td>timeInForce</td>
<td>ENUM</td>
<td>No</td>
<td><ul><li><code>GTC</code> (Good-till-Cancel) - Default</li><li> <code>IOC</code> (Immediate or Cancel, i.e. Taker-only)</li><li> <code>FOK</code> (Fill or Kill, for full size)</li><li><code>MAKER_ONLY</code> (i.e. Post-only)</li><li> <code>MAKER_ONLY_REPRICE</code> (Reprices order to the best maker only price if the specified price were to lead to a taker trade)</li></ul></td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-place-batch-orders'>Place Batch Orders</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorders"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataArray"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
                </span><span class="p">},</span><span class="w"> 
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="w">
                </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">place_batch_order</span> <span class="o">=</span>\
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"placeorders"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s">"dataArray"</span><span class="p">:</span> <span class="p">[{</span>
                  <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
                  <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                  <span class="s">"clientOrderId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"ETH-USD-SWAP-LIN"</span><span class="p">,</span>
                  <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
                  <span class="s">"orderType"</span><span class="p">:</span> <span class="s">"LIMIT"</span><span class="p">,</span>
                  <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                  <span class="s">"timeInForce"</span><span class="p">:</span> <span class="s">"MAKER_ONLY"</span><span class="p">,</span>
                  <span class="s">"price"</span><span class="p">:</span> <span class="mi">100</span>
                <span class="p">},</span>
                <span class="p">{</span>
                  <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
                  <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                  <span class="s">"clientOrderId"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD"</span><span class="p">,</span>
                  <span class="s">"side"</span><span class="p">:</span> <span class="s">"SELL"</span><span class="p">,</span>
                  <span class="s">"orderType"</span><span class="p">:</span> <span class="s">"MARKET"</span><span class="p">,</span>
                  <span class="s">"quantity"</span><span class="p">:</span> <span class="mf">0.2</span>
                <span class="p">}]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">place_batch_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'placeorder'</span><span class="p">:</span>
                <span class="k">continue</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607639739098"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607639739136"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503359"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503457"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderOpened, OrderMatched etc......).</p>

<p>All existing single order placement methods are supported:-</p>

<ul>
<li>LIMIT</li>
<li>MARKET</li>
<li>STOP</li>
</ul>

<p>The websocket reply from the exchange will repond to each order in the batch separately, one order at a time, and has the same message format as the reponse for the single order placement method.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>placeorders</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>dataArray</td>
<td>LIST of dictionaries</td>
<td>Yes</td>
<td>A list of orders with each order in JSON format, the same format/parameters as the request for placing a single order. The max number of orders is still limited by the message length validation so by default up to 20 orders can be placed in a batch, assuming that each order JSON has 200 characters.</td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-cancel-order'>Cancel Order</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">cancel_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"cancelorder"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD-SWAP-LIN"</span><span class="p">,</span>
            <span class="s">"orderId"</span><span class="p">:</span> <span class="mi">12</span>
          <span class="p">}</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">cancel_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'cancelorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173964"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173964"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderClosed etc......).</p>

<p>This command can also be actioned via the trading GUI using the <strong>Cancel</strong> button next to an open order in the <strong>Open Orders</strong> blotter for both Spot and Derivative markets.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>cancelorder</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Yes</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>orderId</td>
<td>INTEGER</td>
<td>Yes</td>
<td>Unique order ID from the exchange</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-cancel-batch-orders'>Cancel Batch Orders</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorders"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataArray"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH-USD"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="w">
                </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">cancel_batch_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"cancelorders"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span>
  <span class="s">"dataArray"</span><span class="p">:</span> <span class="p">[{</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD-SWAP-LIN"</span><span class="p">,</span>
                  <span class="s">"orderId"</span><span class="p">:</span> <span class="mi">12</span>
                <span class="p">},</span>
                <span class="p">{</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BCH-USD"</span><span class="p">,</span>
                  <span class="s">"orderId"</span><span class="p">:</span> <span class="mi">34</span>
                <span class="p">}]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">cancel_batch_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'cancelorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173964"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173978"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173964"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491173989"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderClosed etc......).</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>cancelorders</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>dataArray</td>
<td>LIST of dictionaries</td>
<td>A list of orders with each order in JSON format, the same format/parameters as the request for cancelling a single order. The max number of orders is still limited by the message length validation so by default up to 20 orders can be placed in a batch, assuming that each order JSON has 200 characters.</td>
<td></td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-modify-order'>Modify Order</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">888</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">9800</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">modify_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"modifyorder"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
            <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD-SWAP-LIN"</span><span class="p">,</span>
            <span class="s">"orderId"</span><span class="p">:</span> <span class="mi">888</span><span class="p">,</span>
            <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
            <span class="s">"price"</span><span class="p">:</span> <span class="mi">9800</span><span class="p">,</span>
            <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">2</span>
          <span class="p">}</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">modify_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'modifyorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491032427"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
          </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">888</span><span class="p">,</span><span class="w">
          </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">9800</span><span class="p">,</span><span class="w">
          </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="w">
         </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491032427"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">888</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">9800</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderModified etc......).</p>

<aside class="notice">
One account can only place up to 50 orders per second via websocket.
</aside>

<p>Currently only LIMIT orders are supported by the modify order command.</p>

<ul>
<li>The price and/or quantity and/or side of an order can be modified.</li>
<li>Reducing the quantity will leave the modified orders position in the order queue <strong>unchanged</strong> meaning the order ID is unchanged.</li>
<li>Increasing the quantity will <strong>always</strong> move the modified order to the back of the order queue, resulting in a new order ID.</li>
<li>Modifying the price will <strong>always</strong> move the modified order to the back of the order queue, resulting in a new order ID.</li>
<li>Modifying the side will <strong>always</strong> move the modified order to the back of the order queue, resulting in a new order ID.</li>
</ul>

<p>Please note that when a new order ID is issued the original order is actually <strong>closed</strong> and a new order with a new order ID is <strong>opened</strong>, replacing the original order.  This is described in further detail in the section <a href="#websocket-api-subscriptions-private-order-channel-ordermodified">Order Channel - OrderModified</a>.    </p>

<p>Please be aware that modifying the side of an existing GTC LIMIT order from BUY to SELL or vice versa <strong>without</strong> modifying the price could result in the order matching immediately since its quite likely the new order will become an agressing taker order.  </p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>modifyorder</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>data</td>
<td>DICTIONARY object</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Yes</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>orderId</td>
<td>INTEGER</td>
<td>Yes</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>No</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>price</td>
<td>FLOAT</td>
<td>No</td>
<td>Price for limit orders</td>
</tr>
<tr>
<td>quantity</td>
<td>FLOAT</td>
<td>No</td>
<td>Quantity (denominated by <code>contractValCurrency</code>)</td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h3 id='websocket-api-order-commands-modify-batch-orders'>Modify Batch Orders</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorders"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dataArray"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderID"</span><span class="p">:</span><span class="w"> </span><span class="mi">304304315061932310</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
                </span><span class="p">},</span><span class="w"> 
                </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638237934061</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"orderID"</span><span class="p">:</span><span class="w"> </span><span class="mi">304304315061864646</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">10001</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.21</span><span class="w">
                </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">modify_batch_order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"modifyorders"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="s">"dataArray"</span><span class="p">:</span> <span class="p">[{</span>
                  <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
                  <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"ETH-USD-SWAP-LIN"</span><span class="p">,</span>
                  <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
                  <span class="s">"orderID"</span><span class="p">:</span> <span class="mi">304304315061932310</span><span class="p">,</span>
                  <span class="s">"price"</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span>
                <span class="p">},</span> 
                <span class="p">{</span>
                  <span class="s">"timestamp"</span><span class="p">:</span> <span class="mi">1638237934061</span><span class="p">,</span>
                  <span class="s">"recvWindow"</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                  <span class="s">"marketCode"</span><span class="p">:</span> <span class="s">"BTC-USD"</span><span class="p">,</span>
                  <span class="s">"orderID"</span><span class="p">:</span> <span class="mi">304304315061864646</span><span class="p">,</span>
                  <span class="s">"price"</span><span class="p">:</span> <span class="mi">10001</span><span class="p">,</span>
                  <span class="s">"quantity"</span><span class="p">:</span> <span class="mf">0.21</span>
                <span class="p">}]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">modify_batch_order</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'modifyorder'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607639739098"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"304304315061932310"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"modifyorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607639739136"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"304304315061864646"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.21</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503359"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderID"</span><span class="p">:</span><span class="w"> </span><span class="mi">304304315061932310</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">AND</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"placeorder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592491503457"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderID"</span><span class="p">:</span><span class="w"> </span><span class="mi">304304315061864646</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.21</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">10001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Requires an authenticated websocket connection.
Please also subscribe to the <strong>User Order Channel</strong> to receive push notifications for all message updates in relation to an account or sub-account (e.g. OrderOpened, OrderMatched etc......).</p>

<p>The websocket reply from the exchange will repond to each order in the batch separately, one order at a time, and has the same message format as the reponse for the single order modify method.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>modifyorders</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>dataArray</td>
<td>LIST of dictionaries</td>
<td>Yes</td>
<td>A list of orders with each order in JSON format, the same format/parameters as the request for modifying a single order.  The max number of orders is still limited by the message length validation so by default up to 20 orders can be modified in a batch, assuming that each order JSON has 200 characters.</td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
</tbody></table>
<h2 id='websocket-api-subscriptions-private'>Subscriptions - Private</h2>
<p>All subscriptions to private account channels requires an authenticated websocket connection.</p>

<p>Multiple subscriptions to different channels both public and private can be made within a single subscription command: </p>

<p><code>{&quot;op&quot;: &quot;subscribe&quot;, &quot;args&quot;: [&quot;&lt;value1&gt;&quot;, &quot;&lt;value2&gt;&quot;,.....]}</code></p>
<h3 id='websocket-api-subscriptions-private-balance-channel'>Balance Channel</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"balance:all"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">OR</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"balance:USD"</span><span class="p">,</span><span class="w"> </span><span class="s2">"balance:FLEX"</span><span class="p">,</span><span class="w"> </span><span class="err">........</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">balance</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"balance:all"</span><span class="p">],</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">101</span>
<span class="p">}</span>
<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">balance</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'balance'</span><span class="p">:</span>
                 <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;args value&gt;"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607985371401"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Balance channel format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1599693365059"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tradeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LINEAR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"instrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantityLastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1599694369431"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"instrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantityLastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1599694343242"</span><span class="w">
            </span><span class="p">},</span><span class="w"> 
            </span><span class="err">........</span><span class="w">
          </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency</strong> : 250ms</p>

<p>The websocket will reply with the shown success response format for <strong>each</strong> balance asset channel which has been successfully subscribed to.</p>

<p>If a subscription has been made to <strong>balance:all</strong>, the data array in the message from this balance channel will contain a JSON <strong>list</strong>. Each JSON will contain balance details for each spot asset.  Otherwise the data array will contain a <strong>single</strong> JSON corresponding to one spot asset per asset channel subscription.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td><code>balance:all</code> or a list of individual assets <code>balance:&lt;assetId&gt;</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub> </p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>balance</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>tradeType</td>
<td>STRING</td>
<td><code>LINEAR</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionaries</td>
<td></td>
</tr>
<tr>
<td>total</td>
<td>STRING</td>
<td>Total spot asset balance</td>
</tr>
<tr>
<td>reserved</td>
<td>STRING</td>
<td>Reserved asset balance for working spot and repo orders</td>
</tr>
<tr>
<td>instrumentId</td>
<td>STRING</td>
<td>Base asset ID e.g. <code>BTC</code></td>
</tr>
<tr>
<td>available</td>
<td>STRING</td>
<td>Remaining available asset balance (total - reserved)</td>
</tr>
<tr>
<td>quantityLastUpdated</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-private-position-channel'>Position Channel</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"position:all"</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">OR</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"position:BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> </span><span class="s2">"position:BCH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> </span><span class="err">........</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">position</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span> 
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"position:all"</span><span class="p">],</span> 
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">102</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'position'</span><span class="p">:</span>
                 <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;args value&gt;"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607985371401"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Position channel format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"position"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607985371481"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1900.0"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1616053755423"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"contractValCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"instrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"positionPnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-5.6680"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"estLiquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56934.8258"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1617099855968"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"contractValCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.542000000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"instrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"positionPnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1220.9494164000000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"estLiquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53179.2"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
          </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency</strong> : real-time, on position update</p>

<p>The websocket will reply with the shown success response format for <strong>each</strong> position channel which has been successfully subscribed to.</p>

<p>If a subscription has been made to <strong>position:all</strong>, the data array in the message from this position channel will contain a JSON <strong>list</strong>. Each JSON will contain position details for instrument. Otherwise the data array will contain a <strong>single</strong> JSON corresponding to one instrument per position channel subscription.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td><code>position:all</code> or a list of individual instruments <code>position:&lt;instrumentId&gt;</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub> </p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>position</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionaries</td>
<td></td>
</tr>
<tr>
<td>entryPrice</td>
<td>STRING</td>
<td>Average entry price of total position (Cost / Size)</td>
</tr>
<tr>
<td>lastUpdated</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
<tr>
<td>contractValCurrency</td>
<td>STRING</td>
<td>Base asset ID e.g. <code>ETH</code></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Position size (+/-)</td>
</tr>
<tr>
<td>instrumentId</td>
<td>STRING</td>
<td>e.g. <code>ETH-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>positionPnl</td>
<td>STRING</td>
<td>Postion profit and lost</td>
</tr>
<tr>
<td>estLiquidationPrice</td>
<td>STRING</td>
<td>Estimated liquidation price, return 0 if it is negative(&lt;0)</td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-private-order-channel'>Order Channel</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"order:all"</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">OR</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"order:FLEX-USD"</span><span class="p">,</span><span class="w"> </span><span class="s2">"order:ETH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> </span><span class="err">.....</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">ts</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">sig_payload</span> <span class="o">=</span> <span class="p">(</span><span class="n">ts</span><span class="o">+</span><span class="s">'GET/auth/self/verify'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sig_payload</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"login"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
           <span class="s">"apiKey"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
           <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span>
           <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span>
          <span class="p">}</span>
<span class="p">}</span>
<span class="n">order</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span> 
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"order:all"</span><span class="p">],</span> 
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">102</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'login'</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">position</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'event'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'event'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'position'</span><span class="p">:</span>
                 <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;args value&gt;"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607985371401"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency</strong> : real-time, on order update</p>

<p>The websocket will reply with the shown success response format for EACH order channel which has been successfully subscribed to.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td><code>order:all</code> or a list of individual markets <code>order:&lt;marketCode&gt;</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-orderopened'>OrderOpened</h4>
<blockquote>
<p><strong>OrderOpened message format - LIMIT order</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderOpened"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9600"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w"> </span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER_ONLY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594943491077"</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="w">
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>OrderOpened message format - STOP order</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderOpened"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2245"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594943491077"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9280"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9300"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"True"</span><span class="w">
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>order</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderOpened</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Limit price submitted (only applicable for LIMIT order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Order status</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code e.g. <code>FLEX-USD</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Client submitted time in force, <code>GTC</code> by default</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td><code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price submitted (only applicable for STOP order types)</td>
</tr>
<tr>
<td>limitPrice</td>
<td>STRING</td>
<td>Limit price submitted (only applicable for STOP order types)</td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td><code>False</code> or <code>True</code></td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-orderclosed'>OrderClosed</h4>
<blockquote>
<p><strong>OrderClosed message format - LIMIT order</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderClosed"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9600"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Canceled status&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Time in force&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594943491077"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.5"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="w"> 
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>OrderClosed message format - STOP order</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderClosed"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELED_BY_USER"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Time in force&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594943491077"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.5"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9100"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9120"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"True"</span><span class="w"> 
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>There are multiple scenarios in which an order is closed as described by the <strong>status</strong> field in the OrderClosed message.  In summary orders can be closed by:-</p>

<ul>
<li><code>CANCELED_BY_USER</code> - the client themselves initiating this action or the liquidation engine on the clients behalf if the clients account is below the maintenance margin threshold</li>
<li><code>CANCELED_BY_MAKER_ONLY</code> - if a maker-only order is priced such that it would actually be an agressing taker trade, the order is automatically canceled to prevent this order from matching as a taker</li>
<li><code>CANCELED_BY_FOK</code> - since fill-or-kill orders requires <strong>all</strong> of the order quantity to immediately take and match at the submitted limit price or better, if no such match is possible then the whole order quantity is canceled</li>
<li><code>CANCELED_ALL_BY_IOC</code> - since immediate-or-cancel orders also requires an immediate match at the specified limit price or better, if no such match price is possible for <strong>any</strong> of the submitted order quantity then the whole order quantity is canceled</li>
<li><code>CANCELED_PARTIAL_BY_IOC</code> - since immediate-or-cancel orders only requires <strong>some</strong> of the submitted order quantity to immediately take and match at the specified limit price or better, if a match is possible for only a <strong>partial</strong> quantity then only the remaining order quantity which didn&#39;t immediately match is canceled</li>
<li><code>CANCELED_BY_AMEND</code> - if a <strong>Modify Order</strong> command updated an order such that it changed its position in the order queue, the original order would be closed and an OrderClosed notice would be broadcasted in the Order Channel with this status</li>
</ul>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>order</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderClosed</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Limit price of closed order (only applicable for LIMIT order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Original order quantity of closed order</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td><ul><li><code>CANCELED_BY_USER</code></li><li><code>CANCELED_BY_MAKER_ONLY</code></li><li><code>CANCELED_BY_FOK</code></li><li><code>CANCELED_ALL_BY_IOC</code></li><li><code>CANCELED_PARTIAL_BY_IOC</code></li><li><code>CANCELED_BY_AMEND</code></li></ul></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Time in force of closed order</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remaining order quantity of closed order</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price of closed stop order (only applicable for STOP order types)</td>
</tr>
<tr>
<td>limitPrice</td>
<td>STRING</td>
<td>Limit price of closed stop order (only applicable for STOP order types)</td>
</tr>
<tr>
<td>ordertype</td>
<td>STRING</td>
<td><code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td><code>False</code> or <code>True</code></td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-orderclosed-failure'>OrderClosed Failure</h4>
<blockquote>
<p><strong>OrderClosed failure message format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCEL"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order request was rejected : REJECT_CANCEL_ORDER_ID_NOT_FOUND"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100004"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3330802124194931673</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"displayQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchedOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchedOrderId2"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"matchedId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"matchedType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REJECT_CANCEL_ORDER_ID_NOT_FOUND"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"timeCondition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"timestampEpochMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1615377638518</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This order message can occur if:- </p>

<ul>
<li>an order has already been matched by the time the cancel order command is recieved and processed by the exchange which means this order is no longer active and therefore cannot be closed.</li>
<li>multiple cancel order commands for the <strong>same</strong> orderID have been sent in quick sucession to the exchange by mistake and only the first cancel order command is accepted and processed by the exchange which means this order is no longer active and therefore cannot be closed again.</li>
</ul>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>event</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>submitted</td>
<td>BOOL</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>code</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>displayQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchPrice</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchedOrderId</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchedOrderId2</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>matchedId</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>matchedType</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>remainQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timeCondition</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timestampEpochMs</td>
<td>LONG</td>
<td></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>price</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>isTriggered</td>
<td>BOOL</td>
<td></td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-ordermodified'>OrderModified</h4>
<blockquote>
<p><strong>OrderModified message format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderModified"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94335"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9600"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">    
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594943491077"</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="w"> 
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>As described in a previous section <a href="#websocket-api-order-commands-modify-order">Order Commands - Modify Order</a>, the Modify Order command can potentially affect the queue position of the order depending on which parameter of the original order has been modified.</p>

<p>If the orders queue position is <strong>unchanged</strong> because the orders quantity has been <strong>reduced</strong> and no other order parameter has been changed then this <strong>OrderModified</strong> message will be sent via the Order Channel giving the full details of the modified order.  In this case the order ID is unchanged.</p>

<p>If however the order queue position has changed becuase the orders: (1) side was modified, (2) quantity was increased, (3) price was changed or any combination of these, then the exchange will close the orginal order with an <strong>OrderClosed</strong> message with <strong>status</strong> <code>CANCELED_BY_AMEND</code>, followed by the opening of a new order with an <strong>OrderOpened</strong> message containing a new order ID to reflect the orders new position in the order queue.</p>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>order</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderModified</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Limit price of modified order (only applicable for LIMIT order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity of modified order</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Order status</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code e.g. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Client submitted time in force, <code>GTC</code> by default</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Current millisecond timestamp</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td><code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price of modified order (only applicable for STOP order types)</td>
</tr>
<tr>
<td>limitPrice</td>
<td>STRING</td>
<td>Limit price of modified order (only applicable for STOP order types)</td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td><code>False</code> or <code>True</code></td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-ordermodified-failure'>OrderModified Failure</h4>
<blockquote>
<p><strong>OrderModified failure message format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AMEND"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order request was rejected : REJECT_AMEND_ORDER_ID_NOT_FOUND"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100004"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3330802124194931673</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"displayQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">917.5</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchedOrderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastMatchedOrderId2"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"matchedId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"matchedType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REJECT_AMEND_ORDER_ID_NOT_FOUND"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"timeCondition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUSHI-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"timestampEpochMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1615377638518</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">917.5</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="w">
          </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This order message can occur if an order has already been matched by the time the modify order command is recieved and processed by the exchange which means this order is no longer active and therefore cannot be modified.</p>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>event</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>submitted</td>
<td>BOOL</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>code</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>displayQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchPrice</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchedOrderId</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>lastMatchedOrderId2</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>matchedId</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>matchedType</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>remainQuantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timeCondition</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>timestampEpochMs</td>
<td>LONG</td>
<td></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>price</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>DECIMAL</td>
<td></td>
</tr>
<tr>
<td>isTriggered</td>
<td>BOOL</td>
<td></td>
</tr>
</tbody></table>
<h4 id='websocket-api-subscriptions-private-order-channel-ordermatched'>OrderMatched</h4>
<blockquote>
<p><strong>OrderMatched message format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderMatched"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Your account ID&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"567531657"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9300"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Matched status&gt;"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1592490254168"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"matchId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11568123"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"matchPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9300"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"matchQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderMatchType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Order type&gt;"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"limitPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9050"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.7"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"feeInstrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">   
              </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>order</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderMatched</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account identifier</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Unique order ID from the exchange</td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Limit price submitted (only applicable for LIMIT order types)</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price submitted (only applicable for STOP order types)</td>
</tr>
<tr>
<td>limitPrice</td>
<td>STRING</td>
<td>Limit price submitted (only applicable for STOP order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Order quantity submitted</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td><code>FILLED</code> or <code>PARTIAL_FILL</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code i.e. <code>BTC-USD-SWAP-LIN</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Client submitted time in force (only applicable for LIMIT and STOP order types)</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Millisecond timestamp of order match</td>
</tr>
<tr>
<td>matchID</td>
<td>STRING</td>
<td>Exchange match ID</td>
</tr>
<tr>
<td>matchPrice</td>
<td>STRING</td>
<td>Match price of order from this match ID</td>
</tr>
<tr>
<td>matchQuantity</td>
<td>STRING</td>
<td>Match quantity of order from this match ID</td>
</tr>
<tr>
<td>orderMatchType</td>
<td>STRING</td>
<td><code>MAKER</code> or <code>TAKER</code></td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remaining order quantity</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td><ul><li><code>LIMIT</code></li><li><code>MARKET</code></li><li><code>STOP</code></li></ul></td>
</tr>
<tr>
<td>fees</td>
<td>STRING</td>
<td>Amount of fees paid from this match ID</td>
</tr>
<tr>
<td>feeInstrumentId</td>
<td>STRING</td>
<td>Instrument ID of fees paid from this match ID</td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td><code>False</code> (or <code>True</code> for STOP order types)</td>
</tr>
</tbody></table>
<h2 id='websocket-api-subscriptions-public'>Subscriptions - Public</h2>
<p>All subscriptions to public channels do <strong>not</strong> require an authenticated websocket connection.</p>

<p>Multiple subscriptions to different channels both public and private can be made within a single subscription command:</p>

<p><code>{&quot;op&quot;: &quot;subscribe&quot;, &quot;args&quot;: [&quot;&lt;value1&gt;&quot;, &quot;&lt;value2&gt;&quot;,.....]}</code></p>
<h3 id='websocket-api-subscriptions-public-orderbook-depth'>Orderbook Depth</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"depth:BTC-USD-SWAP-LIN"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">orderbook_depth</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"depth:BTC-USD-SWAP-LIN"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">orderbook_depth</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth:BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"103"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1607985371601"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Orderbook depth channel format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"instrumentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"seqNum"</span><span class="p">:</span><span class="w"> </span><span class="mi">1608898592006137237</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1609350022785"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"checksum"</span><span class="p">:</span><span class="w"> </span><span class="mi">1139901235</span><span class="p">,</span><span class="w"> 
      </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="mf">5556.82</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">    </span><span class="err">//price</span><span class="p">,</span><span class="w"> </span><span class="err">quantity</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.84</span><span class="p">,</span><span class="w"> </span><span class="mf">98.13</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.92</span><span class="p">,</span><span class="w"> </span><span class="mf">1.582</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5557.6</span><span class="p">,</span><span class="w"> </span><span class="mf">4.291</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5557.85</span><span class="p">,</span><span class="w"> </span><span class="mf">2.54</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w">
              </span><span class="p">],</span><span class="w">
      </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="mf">5556.81</span><span class="p">,</span><span class="w"> </span><span class="mf">1.92</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">  </span><span class="err">//price</span><span class="p">,</span><span class="w"> </span><span class="err">quantity</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.8</span><span class="p">,</span><span class="w"> </span><span class="mf">2.1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.79</span><span class="p">,</span><span class="w"> </span><span class="mf">1.9</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.19</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">
                </span><span class="p">[</span><span class="mf">5556.08</span><span class="p">,</span><span class="w"> </span><span class="mf">2.972</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency:</strong> 50ms</p>

<p>This orderbook depth channel sends a snapshot of the entire orderbook every 50ms.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td>List of individual markets <code>&lt;depth&gt;:&lt;marketCode&gt;</code> e.g: <code>[depthL10:BTC-USD-SWAP-LIN]</code>, the <code>depth</code> can be <code>depthL5</code> <code>depthL10</code> <code>depthL25</code> <code>depth</code>(includes all)</td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>depth</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>instrumentId</td>
<td>STRING</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>seqNum</td>
<td>INTEGER</td>
<td>Sequence number of the order book snapshot</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
<tr>
<td>asks</td>
<td>LIST of floats</td>
<td>Sell side depth; <ol><li>price</li><li>quantity</li><li>0</li><li>0</li></ol></td>
</tr>
<tr>
<td>bids</td>
<td>LIST of floats</td>
<td>Buy side depth; <ol><li>price</li><li>quantity</li><li>0</li><li>0</li></ol></td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-public-trade'>Trade</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"trade:BTC-USD-SWAP-LIN"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">trade</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"trade:BTC-USD-SWAP-LIN"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">trade</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>

</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"trade:BTC-USD-SWAP-LIN"</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594299886880"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Trade channel format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trade"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2778148208082945"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5556.91"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594299886890"</span><span class="w">
            </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency:</strong> real-time, with every order matched event</p>

<p>This trade channel sends public trade information whenever an order is matched on the orderbook. </p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td>list of individual markets <code>trade:&lt;marketCode&gt;</code></td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>trade</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>tradeId</td>
<td>STRING</td>
<td>Transaction Id</td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Matched price</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Matched quantity</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Matched side</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Matched timestamp</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-public-ticker'>Ticker</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ticker:all"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">OR</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ticker:FLEX-USD"</span><span class="p">,</span><span class="w"> </span><span class="err">........</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">ticker</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"ticker:all"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">ticker</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;args value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594299886890"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Channel update format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.80500000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.39600000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.53300000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currencyVolume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"openInterest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1INCH-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1622020931049"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.304"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastMarkPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.304"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.80600000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.39600000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.53300000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currencyVolume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"openInterest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1INCH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1622020931046"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.304"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastMarkPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.304"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency:</strong> 500 ms</p>

<p>The ticker channel pushes live price and volume information about the contract.</p>

<p>The websocket will reply with the shown success response format for <strong>each</strong> ticker channel which has been successfully subscribed to.</p>

<p>The data array in the message from this ticker channel will contain a single JSON corresponding to one ticker subscription.</p>

<p>If you subcribe &quot;ticker:all&quot;, you would get one whole message containing all markets.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td><code>ticker:all</code> or a list of individual markets <code>ticker:&lt;marketCode&gt;</code></td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>ticker</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>last</td>
<td>STRING</td>
<td>Last traded price</td>
</tr>
<tr>
<td>markPrice</td>
<td>STRING</td>
<td>Mark price</td>
</tr>
<tr>
<td>open24h</td>
<td>STRING</td>
<td>24 hour rolling opening price</td>
</tr>
<tr>
<td>volume24h</td>
<td>STRING</td>
<td>24 hour rolling trading volume in counter currency</td>
</tr>
<tr>
<td>currencyVolume24h</td>
<td>STRING</td>
<td>24 hour rolling trading volume in base currency</td>
</tr>
<tr>
<td>high24h</td>
<td>STRING</td>
<td>24 hour highest price</td>
</tr>
<tr>
<td>low24h</td>
<td>STRING</td>
<td>24 hour lowest price</td>
</tr>
<tr>
<td>openInterest</td>
<td>STRING</td>
<td>Open interest</td>
</tr>
<tr>
<td>lastQty</td>
<td>STRING</td>
<td>Last traded price amount</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-public-candles'>Candles</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"candles60s:BTC-USD-SWAP-LIN"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">candles</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"candles60s:BTC-USD-SWAP-LIN"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.coinflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">candles</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"candles60s:BTC-USD-SWAP-LIN"</span><span class="p">],</span><span class="w"> 
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594313762698"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Channel update format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"candle60s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"candle"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"1594313762698"</span><span class="p">,</span><span class="w"> </span><span class="err">//timestamp</span><span class="w">
                </span><span class="s2">"9633.1"</span><span class="p">,</span><span class="w">        </span><span class="err">//open</span><span class="w">
                </span><span class="s2">"9693.9"</span><span class="p">,</span><span class="w">        </span><span class="err">//high</span><span class="w">
                </span><span class="s2">"9238.1"</span><span class="p">,</span><span class="w">        </span><span class="err">//low</span><span class="w">
                </span><span class="s2">"9630.2"</span><span class="p">,</span><span class="w">        </span><span class="err">//close</span><span class="w">
                </span><span class="s2">"45247"</span><span class="p">,</span><span class="w">         </span><span class="err">//volume</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">counter</span><span class="w"> </span><span class="err">currency</span><span class="w">
                </span><span class="s2">"5.3"</span><span class="w">            </span><span class="err">//volume</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">base</span><span class="w"> </span><span class="err">currency</span><span class="w">
              </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency</strong>: 500ms</p>

<p><strong>Granularity</strong>: 60s, 180s, 300s, 900s, 1800s, 3600s, 7200s, 14400s, 21600s, 43200s, 86400s</p>

<p>The candles channel pushes candlestick data for the current candle.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td>list of individual candle granularity and market <code>candles&lt;granularity&gt;:&lt;marketCode&gt;</code></td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>candles&lt;granularity&gt;</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>candle</td>
<td>LIST of strings</td>
<td><ol><li>timestamp</li><li>open</li><li>high</li><li>low</li><li>close</li><li>volume in counter currency</li><li>volume in base currency</li></ol></td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-public-liquidation-rfq'>Liquidation RFQ</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"liquidationRFQ"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">liquidation</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span> 
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"liquidationRFQ"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.comflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">liquidation</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"liquidationRFQ"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1613774604469"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Channel update format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"liquidationRFQ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="w">
              </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1613774607889"</span><span class="w">
          </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency</strong>: real-time, whenever there is planned liquidation event of a clients position OR an auto-borrow OR an auto-borrow repayment</p>

<p>The liquidation RFQ (request for quotes) channel publishes a message 50ms before a liquidation event is due to occur.  A liquidation event can be classed as one of the following:-</p>

<ul>
<li>liquidation of a clients traded position (perps, futures or index)</li>
<li>an auto-borrow (in a repo orderbook) of USD because a clients account has negative USD balances greater than the allowable threshold</li>
<li>an auto-repayment (in a repo orderbook) of a previous auto-borrow because a clients account now has sufficient USD balances to repay the loan</li>
</ul>

<p>The message will contain the market code and is designed to give users an opportunity to make a 2 way market for the upcoming liquidation event.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>Single element LIST</td>
<td>Yes</td>
<td><code>liquidationRFQ</code></td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>liquidationRFQ</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionary</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code of liquidation</td>
</tr>
<tr>
<td>timestamp</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='websocket-api-subscriptions-public-market'>Market</h3>
<blockquote>
<p><strong>Request format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"market:all"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">OR</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"market:FLEX-USD"</span><span class="p">,</span><span class="w"> </span><span class="err">........</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">market</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"op"</span><span class="p">:</span> <span class="s">"subscribe"</span><span class="p">,</span>
  <span class="s">"tag"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"args"</span><span class="p">:</span> <span class="p">[</span><span class="s">"market:all"</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span><span class="o">=</span> <span class="s">'wss://stgapi.comflex.us/v1/websocket'</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ws</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"websocket disconnected"</span><span class="p">)</span>
                <span class="n">ws</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">'nonce'</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">market</span><span class="p">))</span>
            <span class="k">elif</span> <span class="s">'success'</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s">'success'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'True'</span><span class="p">:</span>
                <span class="k">continue</span>
<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">subscribe</span><span class="p">())</span>
</code></pre></div>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;args value&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594299886890"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Channel update format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"marketPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.367"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"listingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593288000000"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"qtyIncrement"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"upperPriceBound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.417"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"lowerPriceBound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.317"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"counter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPOT"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"marketId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3001000000000"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"referencePair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX/USD"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"tickSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"marketPriceLastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1613769981920"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"contractValCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX/USD Spot"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX-USD"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"marginCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w"> 
              </span><span class="nl">"base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="w">
          </span><span class="p">},</span><span class="w"> 
          </span><span class="err">........</span><span class="w">
        </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Channel Update Frequency:</strong> 1s</p>

<p>The market channel pushes live information about the market such as the current market price and the lower &amp; upper sanity bounds as well as reference data related to the market.</p>

<p>The websocket will reply with the shown success response format for <strong>each</strong> market which has been successfully subscribed to.</p>

<p>If a subscription has been made to <strong>market:all</strong>, the data array in the message from this channel will contain a JSON <strong>list</strong> of all markets. Each JSON will contain information for each market seperately. Otherwise the data array will contain a single JSON corresponding to one market per market channel subscription.</p>

<p><sub><strong>Request Parameters</strong></sub> </p>

<table><thead>
<tr>
<th>Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>op</td>
<td>STRING</td>
<td>Yes</td>
<td><code>subscribe</code></td>
</tr>
<tr>
<td>tag</td>
<td>INTEGER or STRING</td>
<td>No</td>
<td>If given it will be echoed in the reply</td>
</tr>
<tr>
<td>args</td>
<td>LIST</td>
<td>Yes</td>
<td><code>market:all</code> or a list of individual markets <code>market:&lt;marketCode&gt;</code></td>
</tr>
</tbody></table>

<p><sub><strong>Channel Update Fields</strong></sub></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>STRING</td>
<td><code>market</code></td>
</tr>
<tr>
<td>data</td>
<td>LIST of dictionaries</td>
<td></td>
</tr>
<tr>
<td>marketPrice</td>
<td>STRING</td>
<td>Mark price</td>
</tr>
<tr>
<td>listingDate</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
<tr>
<td>qtyIncrement</td>
<td>STRING</td>
<td>Quantity increment</td>
</tr>
<tr>
<td>upperPriceBound</td>
<td>STRING</td>
<td>Upper sanity price bound</td>
</tr>
<tr>
<td>lowerPriceBound</td>
<td>STRING</td>
<td>Lower sanity price bound</td>
</tr>
<tr>
<td>counter</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>marketId</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>referencePair</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>tickSize</td>
<td>STRING</td>
<td>Tick size</td>
</tr>
<tr>
<td>marketPriceLastUpdated</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
<tr>
<td>contractValCurrency</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>marginCurrency</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>base</td>
<td>STRING</td>
<td></td>
</tr>
</tbody></table>
<h2 id='websocket-api-other-responses'>Other Responses</h2>
<p>By subscribing to an authenticated websocket there may be instances when a REST method will also generate a websocket reponse in addition to the REST reply.  There are also some GUI commands which will generate a websocket reponse.</p>
<h3 id='websocket-api-other-responses-cancel-all-open-orders'>Cancel All Open Orders</h3>
<blockquote>
<p><strong>Success response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCEL"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612476498953"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Documentation for the REST method for cancelling <strong>all</strong> open orders for an account can be found here <a href="#rest-api-methods-private-delete-v1-cancel-orders">Cancel All Orders</a>.</p>

<p>Documentation for the REST method for cancelling <strong>all</strong> open orders <strong>by market</strong> for an account can be found here <a href="#rest-api-methods-private-delete-v1-cancel-orders-marketcode">Cancel All Orders By Market</a>.</p>

<p>In both these instances a successful action will generate the shown repsonse in an authenticated websocket.</p>

<p>This action can also be executed via the trading GUI using the <strong>Cancel All</strong> button on the <strong>Open Orders</strong> blotter for both Spot and Derivative markets.</p>
<h2 id='websocket-api-error-codes'>Error Codes</h2>
<blockquote>
<p><strong>Failure response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;opValue&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorMessage&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;errorCode&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="err">False</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Both subscription and order command requests sent via websocket can be rejected and the failure response will return an error code and a corresponding error message explaining the reason for the rejection.</p>

<table><thead>
<tr>
<th>Code</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td>05001</td>
<td>Your operation authority is invalid</td>
</tr>
<tr>
<td>20000</td>
<td>Signature is invalid</td>
</tr>
<tr>
<td>20001</td>
<td>Operation failed, please contact system administrator</td>
</tr>
<tr>
<td>20002</td>
<td>Unexpected error, please check if your request data complies with the specification.</td>
</tr>
<tr>
<td>20003</td>
<td>Unrecognized operation</td>
</tr>
<tr>
<td>20005</td>
<td>Already logged in</td>
</tr>
<tr>
<td>20006</td>
<td>Quantity must be greater than zero</td>
</tr>
<tr>
<td>20007</td>
<td>You are accessing server too rapidly</td>
</tr>
<tr>
<td>20008</td>
<td>clientOrderId must be greater than zero if provided</td>
</tr>
<tr>
<td>20009</td>
<td>JSON data format is invalid</td>
</tr>
<tr>
<td>20010</td>
<td>Either clientOrderId or orderId is required</td>
</tr>
<tr>
<td>20011</td>
<td>marketCode is required</td>
</tr>
<tr>
<td>20012</td>
<td>side is required</td>
</tr>
<tr>
<td>20013</td>
<td>orderType is required</td>
</tr>
<tr>
<td>20014</td>
<td>clientOrderId is not long type</td>
</tr>
<tr>
<td>20015</td>
<td>marketCode is invalid</td>
</tr>
<tr>
<td>20016</td>
<td>side is invalid</td>
</tr>
<tr>
<td>20017</td>
<td>orderType is invalid</td>
</tr>
<tr>
<td>20018</td>
<td>timeInForce is invalid</td>
</tr>
<tr>
<td>20019</td>
<td>orderId is invalid</td>
</tr>
<tr>
<td>20020</td>
<td>stopPrice or limitPrice is invalid</td>
</tr>
<tr>
<td>20021</td>
<td>price is invalid</td>
</tr>
<tr>
<td>20022</td>
<td>price is required for LIMIT order</td>
</tr>
<tr>
<td>20023</td>
<td>timestamp is required</td>
</tr>
<tr>
<td>20024</td>
<td>timestamp exceeds the threshold</td>
</tr>
<tr>
<td>20025</td>
<td>API key is invalid</td>
</tr>
<tr>
<td>20026</td>
<td>Token is invalid or expired</td>
</tr>
<tr>
<td>20027</td>
<td>The length of the message exceeds the maximum length</td>
</tr>
<tr>
<td>20028</td>
<td>price or stopPrice or limitPrice must be greater than zero</td>
</tr>
<tr>
<td>20029</td>
<td>stopPrice must be less than limitPrice for Buy Stop Order</td>
</tr>
<tr>
<td>20030</td>
<td>limitPrice must be less than stopPrice for Sell Stop Order</td>
</tr>
<tr>
<td>100005</td>
<td>Open order not found with id</td>
</tr>
<tr>
<td>100006</td>
<td>Open order does not match to the given account</td>
</tr>
<tr>
<td>200050</td>
<td>The market is not active</td>
</tr>
<tr>
<td>710002</td>
<td>FAILED sanity bound check as price (.....) &lt; lower bound (.....)</td>
</tr>
<tr>
<td>710003</td>
<td>FAILED sanity bound check as price (.....) &gt; upper bound (.....)</td>
</tr>
<tr>
<td>710004</td>
<td>FAILED net position check as position (.....) &gt; threshold (.....)</td>
</tr>
<tr>
<td>710005</td>
<td>FAILED margin check as collateral (.....) &lt; var (.....)</td>
</tr>
<tr>
<td>710006</td>
<td>FAILED balance check as balance (.....) &lt; value (.....)</td>
</tr>
</tbody></table>
<h1 id='rest-api'>REST API</h1>
<p><strong>TEST</strong> </p>

<ul>
<li><code>https://stgapi.coinflex.us</code></li>
</ul>

<p><strong>LIVE</strong> site</p>

<ul>
<li><code>https://api.coinflex.us</code></li>
</ul>

<p>For clients who do not wish to take advantage of CoinFLEX US&#39;s native WebSocket API, CoinFLEX US offers a RESTful API that implements much of the same functionality.</p>
<h2 id='rest-api-error-codes'>Error Codes</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>429</td>
<td>Rate limit reached</td>
</tr>
<tr>
<td>10001</td>
<td>General networking failure</td>
</tr>
<tr>
<td>20001</td>
<td>Invalid parameter</td>
</tr>
<tr>
<td>30001</td>
<td>Missing parameter</td>
</tr>
<tr>
<td>40001</td>
<td>Alert from the server</td>
</tr>
<tr>
<td>50001</td>
<td>Unknown server error</td>
</tr>
</tbody></table>
<h2 id='rest-api-rate-limits'>Rate Limits</h2>
<p>Each IP is limited to:</p>

<ul>
<li>100 requests per second</li>
<li>20 POST v1/orders requests per second</li>
<li>2500 requests over 5 minutes</li>
</ul>

<p>Certain endpoints have extra IP restrictions:</p>

<ul>
<li><code>s</code> denotes a second</li>
<li>Requests limited to <code>1/s</code> &amp; <code>2/10s</code>

<ul>
<li>Only 1 request is permitted per second and only 2 requests are permitted within 10 seconds</li>
</ul></li>
<li>Request limit <code>1/10s</code>

<ul>
<li>The endpoint will block for 10 seconds after an incorrect 2FA code is provided (if the endpoint requires a 2FA code)</li>
</ul></li>
</ul>

<p>Affected APIs:</p>

<ul>
<li><a href="?json#rest-api-v1-deposits-and-withdrawals-post-v1-withdrawal">POST /v1/withdrawal</a></li>
<li><a href="?json#rest-api-v1-deposits-and-withdrawals-post-v1-transfer">POST /v1/transfer</a></li>
<li><a href="?json#rest-api-v1-flex-assets-post-v1-flexasset-mint">POST /v1/flexasset/mint</a></li>
<li><a href="?json#rest-api-v1-flex-assets-post-v1-flexasset-redeem">POST /v1/flexasset/redeem</a></li>
</ul>
<h2 id='rest-api-authentication'>Authentication</h2>
<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"AccessKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="c1"># rest_url = 'https://api.coinflex.us'
# rest_path = 'api.coinflex.us'
</span>
<span class="n">rest_url</span> <span class="o">=</span> <span class="s">'https://stgapi.coinflex.us'</span>
<span class="n">rest_path</span> <span class="o">=</span> <span class="s">'stgapi.coinflex.us'</span>

<span class="n">api_key</span> <span class="o">=</span> <span class="s">"API-KEY"</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">"API-SECRET"</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">().</span><span class="n">isoformat</span><span class="p">()</span>
<span class="n">nonce</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">method</span> <span class="o">=</span> <span class="s">"API-METHOD"</span>

<span class="c1"># Optional and can be omitted depending on the REST method being called 
</span><span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">'key1'</span><span class="p">:</span> <span class="s">'value1'</span><span class="p">,</span> <span class="s">'key2'</span><span class="p">:</span> <span class="s">'value2'</span><span class="p">})</span>

<span class="k">if</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">method</span> <span class="o">+</span> <span class="s">'?'</span> <span class="o">+</span> <span class="n">body</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">method</span>

<span class="n">msg_string</span> <span class="o">=</span> <span class="s">'{}</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">{}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="s">'GET'</span><span class="p">,</span> <span class="n">rest_path</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">sig</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">api_secret</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">msg_string</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">digest</span><span class="p">()).</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span> <span class="s">'AccessKey'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
          <span class="s">'Timestamp'</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span> <span class="s">'Signature'</span><span class="p">:</span> <span class="n">sig</span><span class="p">,</span> <span class="s">'Nonce'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">nonce</span><span class="p">)}</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">rest_url</span> <span class="o">+</span> <span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header</span><span class="p">)</span>
<span class="c1"># When calling an endpoint that uses body
# resp = requests.post(rest_url + method, data=body, headers=header)
</span><span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>
<p>Public market data methods do not require authentication, however private methods require a <em>Signature</em> to be sent in the header of the request.  These private REST methods  use HMAC SHA256 signatures. </p>

<p>The HMAC SHA256 signature is a keyed HMAC SHA256 operation using a client&#39;s API Secret as the key and a message string as the value for the HMAC operation.</p>

<p>The message string is constructed as follows:-</p>

<p><code>msgString = f&#39;{Timestamp}\n{Nonce}\n{Verb}\n{URL}\n{Path}\n{Body}&#39;</code></p>

<table><thead>
<tr>
<th>Component</th>
<th>Required</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Timestamp</td>
<td>Yes</td>
<td>2020-04-30T15:20:30</td>
<td>YYYY-MM-DDThh:mm:ss</td>
</tr>
<tr>
<td>Nonce</td>
<td>Yes</td>
<td>123</td>
<td>User generated</td>
</tr>
<tr>
<td>Verb</td>
<td>Yes</td>
<td>GET</td>
<td>Uppercase</td>
</tr>
<tr>
<td>Path</td>
<td>Yes</td>
<td>stg.coinflex.us</td>
<td></td>
</tr>
<tr>
<td>Method</td>
<td>Yes</td>
<td>/v1/positions</td>
<td>Available REST methods</td>
</tr>
<tr>
<td>Body</td>
<td>No</td>
<td>marketCode=BTC-USD-SWAP-LIN</td>
<td>Optional and dependent on the REST method being called</td>
</tr>
</tbody></table>

<p>The constructed message string should look like:-</p>

<p><code>2020-04-30T15:20:30\n
  123\n
  GET\n
  stg.coinflex.us\n
  /v1/positions\n
  marketCode=BTC-USD-SWAP-LIN</code></p>

<p>Note the newline characters after each component in the message string. 
If <em>Body</em> is omitted it&#39;s treated as an empty string.</p>

<p>Finally, you must use the HMAC SHA256 operation to get the hash value using the API Secret as the key, and the constructed message string as the value for the HMAC operation. Then encode this hash value with BASE-64.  This output becomes the signature for the specified authenticated REST API method. </p>

<p>The signature must then be included in the header of the REST API call like so:</p>

<p><code>header = {&#39;Content-Type&#39;: &#39;application/json&#39;, &#39;AccessKey&#39;: API-KEY, &#39;Timestamp&#39;: TIME-STAMP, &#39;Signature&#39;: SIGNATURE, &#39;Nonce&#39;: NONCE}</code></p>
<h2 id='rest-api-account-amp-wallet-private'>Account &amp; Wallet - Private</h2><h3 id='rest-api-account-amp-wallet-private-get-v1-accounts'>GET <code>/v1/accounts</code></h3>
<p>Get account information</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/accounts
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21213"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"accountType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LINEAR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.823"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.823"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593627415234"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1585.890"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"325.890"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1260"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593627415123"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"notionalBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2314221"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"feeTier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1611665624601"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account ID</td>
</tr>
<tr>
<td>name</td>
<td>STRING</td>
<td>Account name</td>
</tr>
<tr>
<td>accountType</td>
<td>STRING</td>
<td>Account type</td>
</tr>
<tr>
<td>balances</td>
<td>LIST of dictionaries</td>
<td></td>
</tr>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name</td>
</tr>
<tr>
<td>total</td>
<td>STRING</td>
<td>Total balance</td>
</tr>
<tr>
<td>available</td>
<td>STRING</td>
<td>Available balance</td>
</tr>
<tr>
<td>reserved</td>
<td>STRING</td>
<td>Reserved balance</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Timestamp of updated at</td>
</tr>
<tr>
<td>notionalBalance</td>
<td>STRING</td>
<td>Total dollar value of the account</td>
</tr>
<tr>
<td>feeTier</td>
<td>STRING</td>
<td>Fee tier</td>
</tr>
<tr>
<td>createdAt</td>
<td>STRING</td>
<td>Timestamp indicating when the account was created</td>
</tr>
</tbody></table>
<h3 id='rest-api-account-amp-wallet-private-get-v1-wallets'>GET <code>/v1/wallets</code></h3>
<p>Get wallet history.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/wallets?type={type}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21213"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"walletHistory"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"162131535213"</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>STRING</td>
<td>NO</td>
<td>Type of the history, e.g. <code>deposit</code> <code>withdrawal</code>, return all if not provided</td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 200, max 500</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other.</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account ID</td>
</tr>
<tr>
<td>name</td>
<td>STRING</td>
<td>Account name</td>
</tr>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name</td>
</tr>
<tr>
<td>type</td>
<td>STRING</td>
<td>Type of the history</td>
</tr>
<tr>
<td>amount</td>
<td>STRING</td>
<td>Amount</td>
</tr>
<tr>
<td>createdAt</td>
<td>STRING</td>
<td>Millisecond timestamp of created at</td>
</tr>
</tbody></table>
<h3 id='rest-api-account-amp-wallet-private-get-v1-balances'>GET <code>/v1/balances</code></h3>
<p>Get balances of accounts.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/balances?asset={asset}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21213"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4468.823"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4468.823"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593627415234"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1585.890"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"325.890"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1260"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593627415123"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Asset name</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account ID</td>
</tr>
<tr>
<td>name</td>
<td>STRING</td>
<td>Account name</td>
</tr>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name</td>
</tr>
<tr>
<td>total</td>
<td>STRING</td>
<td>Total balance</td>
</tr>
<tr>
<td>available</td>
<td>STRING</td>
<td>Available balance</td>
</tr>
<tr>
<td>reserved</td>
<td>STRING</td>
<td>Reserved balance</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last updated at</td>
</tr>
</tbody></table>
<h3 id='rest-api-account-amp-wallet-private-get-v1-trades'>GET <code>/v1/trades</code></h3>
<p>Get historical trades sorted by time in descending order (most recent trades first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/trades?marketCode={marketCode}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160067484555913076"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matchId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160067484555913077"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matchedQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matchPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.065"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0065"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderMatchType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAKER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"feeAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0096"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastMatchedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1595514663626"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 200, max 500</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>matchId</td>
<td>STRING</td>
<td>Match ID</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Side of the match</td>
</tr>
<tr>
<td>matchQuantity</td>
<td>STRING</td>
<td>Match quantity</td>
</tr>
<tr>
<td>matchPrice</td>
<td>STRING</td>
<td>Match price</td>
</tr>
<tr>
<td>total</td>
<td>STRING</td>
<td>Total cost</td>
</tr>
<tr>
<td>orderMatchType</td>
<td>STRING</td>
<td>Order match type,  available values: <code>TAKER</code>,<code>MAKER</code></td>
</tr>
<tr>
<td>feeAsset</td>
<td>STRING</td>
<td>Asset name of the fees</td>
</tr>
<tr>
<td>fees</td>
<td>STRING</td>
<td>Fees</td>
</tr>
<tr>
<td>lastMatchedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of the trade</td>
</tr>
</tbody></table>
<h2 id='rest-api-deposits-amp-withdrawals-private'>Deposits &amp; Withdrawals - Private</h2><h3 id='rest-api-deposits-amp-withdrawals-private-get-v1-deposit-addresses'>GET <code>/v1/deposit-addresses</code></h3>
<p>Deposit addresses</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/deposit-addresses?asset={asset}&amp;network={network}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="s2">"0xD25bCD2DBb6114d3BB29CE946a6356B49911358e"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>STRING</td>
<td>Deposit address</td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>Memo (tag) if applicable</td>
</tr>
</tbody></table>
<h3 id='rest-api-deposits-amp-withdrawals-private-get-v1-deposit'>GET <code>/v1/deposit</code></h3>
<p>Get deposit histories sorted by time in descending order (most recent deposits first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/deposit?asset={asset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simpleledger:qzlg6uvceehgzgtz6phmvy8gtdqyt6vf35fxqwx3p7"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"651573911056351237"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETED"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"txId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38c09755bff75d33304a3cb6ee839fcb78bbb38b6e3e16586f20852cdec4886d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creditedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1617940800000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Default all assets</td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td>Deposit address</td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>Memo (tag) if applicable</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>txId</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>creditedAt</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal-addresses'>GET <code>/v1/withdrawal-addresses</code></h3>
<p>Withdrawal addresses</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/withdrawal-addresses?asset={asset}?network={network}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLEX"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x047a13c759D9c3254B4548Fc7e784fBeB1B273g39"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"farming"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"whitelisted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides a list of all saved withdrawal addresses along with their respected labels, network, and whitelist status</p>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Default all assets</td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td>NO</td>
<td>Default all networks</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>Memo (tag) if applicable</td>
</tr>
<tr>
<td>label</td>
<td>STRING</td>
<td>Withdrawal address label</td>
</tr>
<tr>
<td>whitelisted</td>
<td>BOOL</td>
<td></td>
</tr>
</tbody></table>
<h3 id='rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal'>GET <code>/v1/withdrawal</code></h3>
<p>Get withdrawal histories sorted by time in descending order (most recent withdrawals first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/withdrawal?id={id}&amp;asset={asset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simpleledger:qzlg6uvceehgzgtz6phmvy8gtdqyt6vf35fxqwx3p7"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"651573911056351237"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETED"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"txId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38c09755bff75d33304a3cb6ee839fcb78bbb38b6e3e16586f20852cdec4886d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"requestedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1617940800000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"completedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16003243243242"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Default all assets</td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other. This filter applies to &quot;requestedAt&quot;</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other. This filter applies to &quot;requestedAt&quot;</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>Memo (tag) if applicable</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>fee</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>COMPLETED, PROCESSING, PENDING, ON HOLD, CANCELED, or FAILED</td>
</tr>
<tr>
<td>txId</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>requestedAt</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
<tr>
<td>completedAt</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='rest-api-deposits-amp-withdrawals-private-post-v1-withdrawal'>POST <code>/v1/withdrawal</code></h3>
<p>Withdrawal request</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /v1/withdrawal
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simpleledger:qzlg6uvceehgzgtz6phmvy8gtdqyt6vf35fxqwx3p7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"externalFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tfaType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GOOGLE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"743249"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLP"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simpleledger:qzlg6uvceehgzgtz6phmvy8gtdqyt6vf35fxqwx3p7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"externalFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"requestedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1617940800000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Withdrawals may only be initiated by API keys that are linked to the main account and have withdrawals enabled. If the wrong 2fa code is provided the endpoint will block for 10 seconds.</p>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>NO</td>
<td>Memo is required for chains that support memo tags</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>externalFee</td>
<td>BOOL</td>
<td>YES</td>
<td>If false, then the fee is taken from the quantity</td>
</tr>
<tr>
<td>tfaType</td>
<td>STRING</td>
<td>NO</td>
<td>GOOGLE, or AUTHY_SECRET, or YUBIKEY</td>
</tr>
<tr>
<td>code</td>
<td>STRING</td>
<td>NO</td>
<td>2fa code if required by the account</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>externalFee</td>
<td>BOOL</td>
<td>If false, then the fee is taken from the quantity</td>
</tr>
<tr>
<td>fee</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>requestedAt</td>
<td>STRING</td>
<td>Millisecond timestamp</td>
</tr>
</tbody></table>
<h3 id='rest-api-deposits-amp-withdrawals-private-get-v1-withdrawal-fee'>GET <code>/v1/withdrawal-fee</code></h3>
<p>Withdrawal fee estimate</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/withdrawal-fee?asset={asset}&amp;network={network}&amp;address={address}&amp;memo={memo}&amp;quantity={quantity}&amp;externalFee={externalFee}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLP"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"simpleledger:qzlg6uvceehgzgtz6phmvy8gtdqyt6vf35fxqwx3p7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"externalFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"estimatedFee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>NO</td>
<td>Required only for 2 part addresses (tag or memo)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>YES</td>
<td></td>
</tr>
<tr>
<td>externalFee</td>
<td>BOOL</td>
<td>NO</td>
<td>Default false. If false, then the fee is taken from the quantity</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>memo</td>
<td>STRING</td>
<td>Memo (tag) if applicable</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>externalFee</td>
<td>BOOL</td>
<td>If false, then the fee is taken from the quantity</td>
</tr>
<tr>
<td>estimatedFee</td>
<td>STRING</td>
<td></td>
</tr>
</tbody></table>
<h2 id='rest-api-flex-assets-private'>Flex Assets - Private</h2><h3 id='rest-api-flex-assets-private-post-v1-flexasset-mint'>POST <code>/v1/flexasset/mint</code></h3>
<p>Mint</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /v1/flexasset/mint
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<aside class="notice">
Minting is restricted starting 1 minute before an interest payment until 1 minute after the interest payment.
Interest payments occur at 04:00, 12:00, and 20:00 UTC.
</aside>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>YES</td>
<td>Asset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>YES</td>
<td>Quantity to mint</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
</tbody></table>
<h3 id='rest-api-flex-assets-private-post-v1-flexasset-redeem'>POST <code>/v1/flexasset/redeem</code></h3>
<p>Redeem</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /v1/flexasset/redeem
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"redemptionAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1617940800000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<aside class="notice">
Redemptions of any type are restricted starting 1 minute before an interest payment until 1 minute after the interest payment.
Interest payments occur at 04:00, 12:00, and 20:00 UTC.
</aside>

<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>YES</td>
<td>Asset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>YES</td>
<td>Quantity to redeem</td>
</tr>
<tr>
<td>type</td>
<td>STRING</td>
<td>YES</td>
<td><code>NORMAL</code> queues a redemption until the following interest payment and incurs no fee</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>STRING</td>
<td>Available types: <code>NORMAL</code></td>
</tr>
<tr>
<td>redemptionAt</td>
<td>STRING</td>
<td>Millisecond timestamp indicating when redemption will take place</td>
</tr>
</tbody></table>
<h3 id='rest-api-flex-assets-private-get-v1-flexasset-mint'>GET <code>/v1/flexasset/mint</code></h3>
<p>Get historical flexasset mints sorted by time in descending order (most recent mints first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/mint?asset={asset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mintedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16003243243242"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Asset name, available assets: <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>mintedAt</td>
<td>STRING</td>
<td></td>
</tr>
</tbody></table>
<h3 id='rest-api-flex-assets-private-get-v1-flexasset-redeem'>GET <code>/v1/flexasset/redeem</code></h3>
<p>Get historical flexasset redemptions sorted by time in descending order (most recent redemptions first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/redeem?asset={asset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"requestedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16003243243242"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"redeemedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16003243243242"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Asset name, available assets: <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other. Here startTime and endTime refer to the &quot;requestedAt&quot; timestamp</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other. Here startTime and endTime refer to the &quot;requestedAt&quot; timestamp</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>requestedAt</td>
<td>STRING</td>
<td>Millisecond timestamp indicating when redemption was requested</td>
</tr>
<tr>
<td>redeemedAt</td>
<td>STRING</td>
<td>Millisecond timestamp indicating when the flexAssets were redeemed (if applicable)</td>
</tr>
</tbody></table>
<h3 id='rest-api-flex-assets-private-get-v1-flexasset-earned'>GET <code>/v1/flexasset/earned</code></h3>
<p>Get historical flexasset interest payments sorted by time in descending order (most recent payments first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/earned?asset={asset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"snapshotQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00022831"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.28310502"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"paidAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1635822660847"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Asset name, available assets: <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name</td>
</tr>
<tr>
<td>snapshotQuantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>apr</td>
<td>STRING</td>
<td>Annualized APR (%) = rate * 3 * 365 * 100</td>
</tr>
<tr>
<td>rate</td>
<td>STRING</td>
<td>Period interest rate</td>
</tr>
<tr>
<td>amount</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>paidAt</td>
<td>STRING</td>
<td></td>
</tr>
</tbody></table>
<h2 id='rest-api-orders-private'>Orders - Private</h2><h3 id='rest-api-orders-private-post-v1-orders-place'>POST <code>/v1/orders/place</code></h3>
<p>Place order.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /v1/orders/place
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1637100050453</span><span class="p">,</span><span class="w">
    </span><span class="nl">"responseType"</span><span class="p">:</span><span class="s2">"FULL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612249737434"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderOpened"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5571"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000070930390"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612249737434"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35000.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1646820263527"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<aside class="notice">
You can place up to 8 orders at a time in REST API
</aside>

<table><thead>
<tr>
<th>Request Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>responseType</td>
<td>STRING</td>
<td>YES</td>
<td><code>FULL</code> or <code>ACK</code></td>
</tr>
<tr>
<td>orders</td>
<td>LIST</td>
<td>YES</td>
<td>A list of orders</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>NO</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>YES</td>
<td>Market code</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>YES</td>
<td>Side of the order, <code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>YES</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>NO</td>
<td>Default <code>GTC</code></td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>YES</td>
<td>Type of the order, <code>LIMIT</code> or <code>MARKET</code> or <code>STOP</code></td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>NO</td>
<td>Price submitted</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>NO</td>
<td>Stop price for the stop order</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderClosed</code> or <code>OrderMatched</code> or <code>OrderOpend</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account ID</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>submitted</td>
<td>BOOL</td>
<td>Whether the request is submitted or not submitted</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Order status</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>SELL</code> or <code>BUY</code></td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Price submitted</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price for the stop order</td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td>false (or true for STOP order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remainning quantity</td>
</tr>
<tr>
<td>matchId</td>
<td>STRING</td>
<td>Exchange match ID</td>
</tr>
<tr>
<td>matchPrice</td>
<td>STRING</td>
<td>Matched price</td>
</tr>
<tr>
<td>matchQuantity</td>
<td>STRING</td>
<td>Matched quantity</td>
</tr>
<tr>
<td>feeInstrumentId</td>
<td>STRING</td>
<td>Instrument ID of fees paid from this match ID</td>
</tr>
<tr>
<td>fees</td>
<td>STRING</td>
<td>Amount of fees paid from this match ID</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td><code>MARKET</code> or <code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Time in force</td>
</tr>
<tr>
<td>createdAt</td>
<td>STRING</td>
<td>Millisecond timestamp of created at</td>
</tr>
<tr>
<td>lastModifiedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last modified at</td>
</tr>
<tr>
<td>lastMatchedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last matched at</td>
</tr>
</tbody></table>
<h3 id='rest-api-orders-private-get-v1-orders'>GET <code>/v1/orders</code></h3>
<p>Get order history.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/orders?marketCode={marketCode}&amp;orderId={orderId}&amp;clientOrderId={clientOrderId}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000070897369"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1646715600081"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHIB-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CLOSED"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matchedQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IOC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1646715612927"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"closedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1646715612927"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>NO</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 50, max 200</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Status of the order, available values: <code>CLOSED</code> <code>OPEN</code> <code>PARTIALLY_FILLED</code> <code>FILLED</code></td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Side of the order, <code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Price submitted</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price for the stop order</td>
</tr>
<tr>
<td>isTriggered</td>
<td>BOOL</td>
<td>Available values: <code>true</code> <code>false</code>, <code>true</code> is for stop orders</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remainning quantity</td>
</tr>
<tr>
<td>matchedQuantity</td>
<td>STRING</td>
<td>Matched quantity</td>
</tr>
<tr>
<td>avgFillPrice</td>
<td>STRING</td>
<td>Average of filled price</td>
</tr>
<tr>
<td>fees</td>
<td>LIST of dictionaries</td>
<td>Overall fees with instrument ID, if FLEX is no enough to pay the fee then USD will be paid</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>Type of the order, <code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Time in force</td>
</tr>
<tr>
<td>createdAt</td>
<td>STRING</td>
<td>Millisecond timestamp of created at</td>
</tr>
<tr>
<td>lastModifiedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last modified at</td>
</tr>
<tr>
<td>lastMatchedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last matched at</td>
</tr>
<tr>
<td>closedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of closed at</td>
</tr>
</tbody></table>
<h3 id='rest-api-orders-private-get-v1-orders-working'>GET <code>/v1/orders/working</code></h3>
<p>Get working order history.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/orders/working?marketCode={marketCode}&amp;orderId={orderId}&amp;clientOrderId={clientOrderId}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000070177498"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612249737724"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57007.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matchedQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643185408888"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastModifiedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643185408913"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>NO</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>NO</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Status of the working order, available values: <code>OPEN</code> <code>PARTIALLY_FILLED</code></td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Side of the order, <code>BUY</code> or <code>SELL</code></td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Price submitted</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price for the stop order</td>
</tr>
<tr>
<td>isTriggered</td>
<td>BOOL</td>
<td>Available values: <code>true</code> <code>false</code>, <code>true</code> is for stop orders</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remainning quantity</td>
</tr>
<tr>
<td>matchedQuantity</td>
<td>STRING</td>
<td>Matched quantity</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td>Type of the order, <code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Time in force</td>
</tr>
<tr>
<td>createdAt</td>
<td>STRING</td>
<td>Millisecond timestamp of created at</td>
</tr>
<tr>
<td>lastModifiedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last modified at</td>
</tr>
<tr>
<td>lastMatchedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last matched at</td>
</tr>
</tbody></table>
<h3 id='rest-api-orders-private-delete-v1-orders-cancel'>DELETE <code>/v1/orders/cancel</code></h3>
<p>Cancel order by ID.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /v1/orders/cancel
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"recvWindow"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1737100050453</span><span class="p">,</span><span class="w">
    </span><span class="nl">"responseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FULL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612249737434"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000545000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderClosed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100020"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000545000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"submitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1612249737434"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELED_BY_USER"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25000.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isTriggered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"remainQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"closedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1648200825424"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>recvWindow</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>timestamp</td>
<td>LONG</td>
<td>NO</td>
<td>In milliseconds. If an order reaches the matching engine and the current timestamp exceeds timestamp + recvWindow, then the order will be rejected. If timestamp is provided without recvWindow, then a default recvWindow of 1000ms is used. If recvWindow is provided with no timestamp, then the request will not be rejected. If neither timestamp nor recvWindow are provided, then the request will not be rejected.</td>
</tr>
<tr>
<td>responseType</td>
<td>STRING</td>
<td>YES</td>
<td><code>FULL</code> or <code>ACK</code></td>
</tr>
<tr>
<td>orders</td>
<td>LIST</td>
<td>YES</td>
<td>A list of orders</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>YES</td>
<td>Market code</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Either one of orderId or clientOrderId is required</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Either one of orderId or clientOrderId is required</td>
<td>Order ID</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>OrderClosed</code> or <code>OrderMatched</code> or <code>OrderOpend</code></td>
</tr>
<tr>
<td>accountId</td>
<td>STRING</td>
<td>Account ID</td>
</tr>
<tr>
<td>orderId</td>
<td>STRING</td>
<td>Order ID which generated by the server</td>
</tr>
<tr>
<td>submitted</td>
<td>BOOL</td>
<td>Whether the request is submitted or not submitted</td>
</tr>
<tr>
<td>clientOrderId</td>
<td>STRING</td>
<td>Client assigned ID to help manage and identify orders with max value <code>9223372036854775807</code></td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>Order status</td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td><code>SELL</code> or <code>BUY</code></td>
</tr>
<tr>
<td>price</td>
<td>STRING</td>
<td>Price submitted</td>
</tr>
<tr>
<td>stopPrice</td>
<td>STRING</td>
<td>Stop price for the stop order</td>
</tr>
<tr>
<td>isTriggered</td>
<td>STRING</td>
<td>false (or true for STOP order types)</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity submitted</td>
</tr>
<tr>
<td>remainQuantity</td>
<td>STRING</td>
<td>Remainning quantity</td>
</tr>
<tr>
<td>orderType</td>
<td>STRING</td>
<td><code>MARKET</code> or <code>LIMIT</code> or <code>STOP</code></td>
</tr>
<tr>
<td>timeInForce</td>
<td>STRING</td>
<td>Time in force</td>
</tr>
<tr>
<td>closedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of closed at</td>
</tr>
</tbody></table>
<h3 id='rest-api-orders-private-delete-v1-orders-cancel-all'>DELETE <code>/v1/orders/cancel-all</code></h3>
<p>Cancel all orders.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /v1/orders/cancel-all
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-flexUSD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"notice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Orders queued for cancelation"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameters</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code, if it&#39;s null or not sent then cancel all orders for the account</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>notice</td>
<td>STRING</td>
<td><code>Orders queued for cancelation</code> or <code>No working orders found</code></td>
</tr>
</tbody></table>
<h2 id='rest-api-market-data-public'>Market Data - Public</h2><h3 id='rest-api-market-data-public-get-v1-markets'>GET <code>/v1/markets</code></h3>
<p>Get a list of markets on CoinFlex US.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/markets?marketCode={marketCode}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"referencePair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"counter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPOT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tickSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"minSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"listedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1593345600000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"upperPriceBound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65950.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lowerPriceBound"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60877.3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63413.9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1635848576163"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market Code</td>
</tr>
<tr>
<td>name</td>
<td>STRING</td>
<td>Name of the contract</td>
</tr>
<tr>
<td>referencePair</td>
<td>STRING</td>
<td>Reference pair</td>
</tr>
<tr>
<td>base</td>
<td>STRING</td>
<td>Base asset</td>
</tr>
<tr>
<td>counter</td>
<td>STRING</td>
<td>Counter asset</td>
</tr>
<tr>
<td>type</td>
<td>STRING</td>
<td>Type of the contract</td>
</tr>
<tr>
<td>tickSize</td>
<td>STRING</td>
<td>Tick size of the contract</td>
</tr>
<tr>
<td>minSize</td>
<td>STRING</td>
<td>Minimum quantity</td>
</tr>
<tr>
<td>listedAt</td>
<td>STRING</td>
<td>Listing date of the contract</td>
</tr>
<tr>
<td>upperPriceBound</td>
<td>STRING</td>
<td>Sanity bound</td>
</tr>
<tr>
<td>lowerPriceBound</td>
<td>STRING</td>
<td>Sanity bound</td>
</tr>
<tr>
<td>markPrice</td>
<td>STRING</td>
<td>Mark price</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last updated time</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-assets'>GET <code>/v1/assets</code></h3>
<p>Get a list of assets supported on CoinFLEX US.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/assets?asset={asset}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"networkList"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"transactionPrecision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"canDeposit"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"canWithdraw"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"minWithdrawal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0001"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"networkList"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"transactionPrecision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"canDeposit"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"canWithdraw"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"minWithdrawal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0001"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>NO</td>
<td>Name of the asset</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name</td>
</tr>
<tr>
<td>networkList</td>
<td>LIST</td>
<td>List of dictionaries</td>
</tr>
<tr>
<td>network</td>
<td>STRING</td>
<td>Network for deposit and withdrawal</td>
</tr>
<tr>
<td>isWithdrawalFeeChargedToUser</td>
<td>BOOL</td>
<td>Indicates the withdrawal fee is charged to user or not</td>
</tr>
<tr>
<td>canDeposit</td>
<td>BOOL</td>
<td>Indicates can deposit or not</td>
</tr>
<tr>
<td>canWithdraw</td>
<td>BOOL</td>
<td>Indicates can withdraw or not</td>
</tr>
<tr>
<td>minDeposit</td>
<td>STRING</td>
<td>Minimum deposit amount</td>
</tr>
<tr>
<td>minWithdrawal</td>
<td>STRING</td>
<td>Minimum withdrawal amount</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-tickers'>GET <code>/v1/tickers</code></h3>
<p>Get tickers.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/tickers?marketCode={marketCode}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41512.4"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"open24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41915.3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42662.2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41167.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"volume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"114341.4550"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currencyVolume24h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.733"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastTradedPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41802.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastTradedQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1642585256002"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>markPrice</td>
<td>STRING</td>
<td>Mark price</td>
</tr>
<tr>
<td>open24h</td>
<td>STRING</td>
<td>24 hour rolling opening price</td>
</tr>
<tr>
<td>high24h</td>
<td>STRING</td>
<td>24 hour highest price</td>
</tr>
<tr>
<td>low24h</td>
<td>STRING</td>
<td>24 hour lowest price</td>
</tr>
<tr>
<td>volume24h</td>
<td>STRING</td>
<td>Volume in 24 hours</td>
</tr>
<tr>
<td>currencyVolume24h</td>
<td>STRING</td>
<td>24 hour rolling trading volume in counter currency</td>
</tr>
<tr>
<td>lastTradedPrice</td>
<td>STRING</td>
<td>Last traded price</td>
</tr>
<tr>
<td>lastTradedQuantity</td>
<td>STRIN</td>
<td>Last traded quantity</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of last updated time</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-candles'>GET <code>/v1/candles</code></h3>
<p>Get candles.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/candles?marketCode={marketCode}&amp;timeframe={timeframe}&amp;limit={limit}
&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"timeframe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600s"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35888.80000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35925.30000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35717.00000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35923.40000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currencyVolume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1642932000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35805.50000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36141.50000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35784.90000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35886.60000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currencyVolume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"openedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1642928400000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>YES</td>
<td>Market code</td>
</tr>
<tr>
<td>timeframe</td>
<td>STRING</td>
<td>NO</td>
<td>Available values: <code>60s</code>,<code>300s</code>,<code>900s</code>,<code>1800s</code>,<code>3600s</code>,<code>7200s</code>,<code>14400s</code>,<code>86400s</code>, default is <code>3600s</code></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 200, max 500</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other.</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timeframe</td>
<td>STRING</td>
<td>Available values: <code>60s</code>,<code>300s</code>,<code>900s</code>,<code>1800s</code>,<code>3600s</code>,<code>7200s</code>,<code>14400s</code>,<code>86400s</code></td>
</tr>
<tr>
<td>open</td>
<td>STRING</td>
<td>Opening price</td>
</tr>
<tr>
<td>high</td>
<td>STRING</td>
<td>Highest price</td>
</tr>
<tr>
<td>low</td>
<td>STRING</td>
<td>Lowest price</td>
</tr>
<tr>
<td>close</td>
<td>STRING</td>
<td>Closing price</td>
</tr>
<tr>
<td>volume</td>
<td>STRING</td>
<td>Trading volume in counter currency</td>
</tr>
<tr>
<td>currencyVolume</td>
<td>STRING</td>
<td>Trading volume in base currency</td>
</tr>
<tr>
<td>openedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of the candle opened at</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-depth'>GET <code>/v1/depth</code></h3>
<p>Get depth.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/depth?marketCode={marketCode}&amp;level={level}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w"> 
        </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643016065958"</span><span class="p">,</span><span class="w"> 
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mi">39400</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.261</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">41050.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.002</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mi">41051</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.094</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">41052.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.002</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">41054.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.002</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w"> 
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">39382.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.593</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">39380.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.009</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mi">39378</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.009</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">39375.5</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.009</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="p">[</span><span class="w">
                </span><span class="mi">39373</span><span class="p">,</span><span class="w"> 
                </span><span class="mf">0.009</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>YES</td>
<td>Market code</td>
</tr>
<tr>
<td>level</td>
<td>LONG</td>
<td>NO</td>
<td>Default 5, max 100</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>level</td>
<td>LONG</td>
<td>Level</td>
</tr>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of the depth last updated at</td>
</tr>
<tr>
<td>asks</td>
<td>LIST of floats</td>
<td>Sell side depth: [price, quantity]</td>
</tr>
<tr>
<td>bids</td>
<td>LIST of floats</td>
<td>Buy side depth: [price, quantity]</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-flexasset-balances'>GET <code>/v1/flexasset/balances</code></h3>
<p>Get flexAsset balances.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/balances?flexasset={flexasset}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"flexasset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"110.78000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="s2">"110.78000000"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1642735371714"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>flexasset</td>
<td>STRING</td>
<td>YES</td>
<td>FlexAsset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>STRING</td>
<td>Asset name, e.g. &#39;BTC&#39;</td>
</tr>
<tr>
<td>total</td>
<td>STRING</td>
<td>Total balance</td>
</tr>
<tr>
<td>available</td>
<td>STRING</td>
<td>Available balance</td>
</tr>
<tr>
<td>reserved</td>
<td>STRING</td>
<td>Reserved balance (unavailable) due to working spot orders</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of when balance was last updated</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-flexasset-positions'>GET <code>/v1/flexasset/positions</code></h3>
<p>Get flexAsset positions.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/positions?flexasset={asset}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"flexasset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"counterAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-4363.81"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"380.69"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"297.74"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"positionPnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-361978.0395"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"estLiquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643173228911"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"counterAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-28.931000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43100.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"markPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37850.2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"positionPnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"151896.4293000000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"estLiquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"345678367498.5"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastUpdatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1642666693674"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>flexasset</td>
<td>STRING</td>
<td>YES</td>
<td>FlexAsset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>baseAsset</td>
<td>STRING</td>
<td>Base asset</td>
</tr>
<tr>
<td>counterAsset</td>
<td>STRING</td>
<td>Counter asset</td>
</tr>
<tr>
<td>quantity</td>
<td>STRING</td>
<td>Quantity of position</td>
</tr>
<tr>
<td>entryPrice</td>
<td>STRING</td>
<td>Average entry price</td>
</tr>
<tr>
<td>markPrice</td>
<td>STRING</td>
<td>Mark price</td>
</tr>
<tr>
<td>positionPnl</td>
<td>STRING</td>
<td>Postion profit and loss</td>
</tr>
<tr>
<td>estLiquidationPrice</td>
<td>STRING</td>
<td>Estimated liquidation price, return 0 if it is negative(&lt;0)</td>
</tr>
<tr>
<td>lastUpdatedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of when position was last updated</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-flexasset-yields'>GET <code>/v1/flexasset/yields</code></h3>
<p>Get flexasset yields.</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/flexasset/yields?flexasset={flexasset}&amp;limit={limit}&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"flexasset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexBTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"yield"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"paidAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643193000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"flexasset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flexUSD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"yield"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"paidAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643193000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>flexasset</td>
<td>STRING</td>
<td>NO</td>
<td>FlexAsset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 200, max 500</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other.</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>flexasset</td>
<td>STRING</td>
<td>Asset name, available assets e.g. <code>flexUSD</code>, <code>flexBTC</code>, <code>flexETH</code>, <code>flexFLEX</code></td>
</tr>
<tr>
<td>apr</td>
<td>STRING</td>
<td>Annualized APR (%) = yield * 3 * 365 * 100</td>
</tr>
<tr>
<td>yield</td>
<td>STRING</td>
<td>Period yield</td>
</tr>
<tr>
<td>paidAt</td>
<td>STRING</td>
<td>Millisecond timestamp of the interest payment</td>
</tr>
</tbody></table>
<h3 id='rest-api-market-data-public-get-v1-exchange-trades'>GET <code>/v1/exchange-trades</code></h3>
<p>Get historical exchange trades sorted by time in descending order (most recent trades first).</p>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /v1/exchange-trades?marketCode={marketCode}&amp;limit={limit}
&amp;startTime={startTime}&amp;endTime={endTime}
</code></pre></div>
<blockquote>
<p><strong>Successful response format</strong></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"marketCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USD-SWAP-LIN"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matchPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9600.000000000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matchQuantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.100000000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matchedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1595585860254"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Request Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>NO</td>
<td>Market code</td>
</tr>
<tr>
<td>limit</td>
<td>LONG</td>
<td>NO</td>
<td>Default 300, max 300</td>
</tr>
<tr>
<td>startTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default 24 hours ago. startTime and endTime must be within 7 days of each other.</td>
</tr>
<tr>
<td>endTime</td>
<td>LONG</td>
<td>NO</td>
<td>Millisecond timestamp. Default time now. startTime and endTime must be within 7 days of each other.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>marketCode</td>
<td>STRING</td>
<td>Market code</td>
</tr>
<tr>
<td>matchPrice</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>matchQuantity</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>side</td>
<td>STRING</td>
<td>Aggressor (taker) side, available values: <code>BUY</code> <code>SELL</code></td>
</tr>
<tr>
<td>matchedAt</td>
<td>STRING</td>
<td>Millisecond timestamp of matched at</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">curl</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
